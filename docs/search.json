[
  {
    "objectID": "posts/Shinylive/index.html",
    "href": "posts/Shinylive/index.html",
    "title": "Converting Shiny Apps to ShinyLive",
    "section": "",
    "text": "Shiny Apps - can be converted to Shinylive using Quarto in just a few lines of code. If the Shiny app isn’t too complex, we can provide a serverless interactive experience using just an html website. The Shiny App that we converted is one of Posit’s simple Shiny Apps in its gallery (Posit 2014). ShinyLive allows a more frictionless way to share your app without having to use a hosted server by running on its own html page served to the client. The html is rendered in quarto to automatically download the needed assets to the client and it can run from their own pc or mac.\nThe Shiny App that we chose is the KMeans model using the Iris dataset, provides a way to convert a Shiny App, but it’s also a handy tool to deploy on our website. There were just 2 things we had to change and that was using the {shinylive-r} instead of {r} and to change ui to using fluidPage from the bslib library to ensure app resizes well to different devices. You’ll notice that older shiny apps don’t resize well, and this is why."
  },
  {
    "objectID": "posts/Shinylive/index.html#introduction",
    "href": "posts/Shinylive/index.html#introduction",
    "title": "Converting Shiny Apps to ShinyLive",
    "section": "",
    "text": "Shiny Apps - can be converted to Shinylive using Quarto in just a few lines of code. If the Shiny app isn’t too complex, we can provide a serverless interactive experience using just an html website. The Shiny App that we converted is one of Posit’s simple Shiny Apps in its gallery (Posit 2014). ShinyLive allows a more frictionless way to share your app without having to use a hosted server by running on its own html page served to the client. The html is rendered in quarto to automatically download the needed assets to the client and it can run from their own pc or mac.\nThe Shiny App that we chose is the KMeans model using the Iris dataset, provides a way to convert a Shiny App, but it’s also a handy tool to deploy on our website. There were just 2 things we had to change and that was using the {shinylive-r} instead of {r} and to change ui to using fluidPage from the bslib library to ensure app resizes well to different devices. You’ll notice that older shiny apps don’t resize well, and this is why."
  },
  {
    "objectID": "posts/Shinylive/index.html#kmeans",
    "href": "posts/Shinylive/index.html#kmeans",
    "title": "Converting Shiny Apps to ShinyLive",
    "section": "KMeans",
    "text": "KMeans\nKMeans is an unsupervised machine learning algorithm used to group similar data together without already predefined classifications. All the points are clustered around a centroid that represents the mean of all points within the cluster. The number of centroids are referred to as “K values” and represents the number groups within all the data ponts. The goal is to minimize the euclidean distance between the data point and the its centroid mean, maximize the separation between clusters, and minimize total squared distance between each point and it’s assigned centriod.\nIn order to find the optimal K values, you need to run through and iterative process. This KMeans model uses Shinylive to be able to iterate quickly between K values to visually see the best grouping or at least to narrow down the K values to calculate the optimal number of categories.\n\n\nShow the code\n#install.packages(\"shiny\")\n#install.packages(\"shinylive\")\nlibrary(shiny)\nlibrary(shinylive)\nlibrary(bslib)\n\n\n\nAttaching package: 'bslib'\n\n\nThe following object is masked from 'package:utils':\n\n    page\n\n\n\nUpdate Quarto Extension\nRun this in terminal: quarto add quarto-ext/shinylive\n#| '!! shinylive warning !!': |\n#|   shinylive does not work in self-contained HTML documents.\n#|   Please set `embed-resources: false` in your metadata.\n#| standalone: true\n#| viewerHeight: 500\n\n\nvars &lt;- setdiff(names(iris), \"Species\")\n\nui &lt;- fluidPage(\n  titlePanel('Iris k-means clustering'),\n  sidebarLayout(\n    sidebarPanel(\n      selectInput('xcol', 'X Variable', vars),\n      selectInput('ycol', 'Y Variable', vars, selected = vars[[2]]),\n      numericInput('clusters', 'Cluster count', 3, min = 1, max = 9)\n    ),\n    mainPanel(\n      plotOutput('plot1')\n    )\n  )\n)\n\nserver &lt;- function(input, output, session) {\n  selectedData &lt;- reactive({\n    iris[, c(input$xcol, input$ycol)]\n  })\n  clusters &lt;- reactive({\n    kmeans(selectedData(), input$clusters)\n  })\n  output$plot1 &lt;- renderPlot({\n    palette(c(\"#E41A1C\", \"#377EB8\", \"#4DAF4A\", \"#984EA3\",\n              \"#FF7F00\", \"#FFFF33\", \"#A65628\", \"#F781BF\", \"#999999\"))\n    par(mar = c(5.1, 4.1, 0, 1))\n    plot(selectedData(),\n         col = clusters()$cluster,\n         pch = 20, cex = 3)\n    points(clusters()$centers, pch = 4, cex = 4, lwd = 4)\n  })\n}\n\nshinyApp(ui = ui, server = server)"
  },
  {
    "objectID": "posts/Shinylive/index.html#deployment",
    "href": "posts/Shinylive/index.html#deployment",
    "title": "Converting Shiny Apps to ShinyLive",
    "section": "Deployment",
    "text": "Deployment\nWe can take a shiny app and convert it to shiny live that enables the application to run on just the client’s browser from an html page.\n\nVerify you can retrieve the shinylive assets\n\n\nShow the code\n#shinylive::assets_info()\n\n\n\n\nYAML (Remove comments and add to your Yaml) :\n\n\nShow the code\n# ---  \n# format:   \n#   html:  \n#     embed-resources: false  \n#   filters:  \n#     - shinylive  \n# ---"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "GoData.ca",
    "section": "",
    "text": "Per capita: Quebec teens most targeted by fraud in Canada\n\n\n\nCanadian Anti-Fraud Centre\n\nCAFC\n\nDatabot\n\nPosit\n\nPositron\n\nggplot2\n\n\n\n\n\n\n\n\n\nJan 11, 2026\n\n43 min\n\n\n\n\n\n\n\n\n\n\n\nData Pipelines with Pyspark\n\n\n\nPyspark\n\nPython\n\nR\n\nCAFC\n\nDownloads\n\n\n\n\n\n\n\n\n\nAug 15, 2025\n\n4 min\n\n\n\n\n\n\n\n\n\n\n\nEasily Build Customized LLMs\n\n\n\nPython\n\nOPENAI\n\nLLMs\n\nJupyter\n\nOBBBA\n\n\n\n\n\n\n\n\n\nJul 15, 2025\n\n2 min\n\n\n\n\n\n\n\n\n\n\n\nConverting Shiny Apps to ShinyLive\n\n\n\nR\n\nShinylive\n\nKMeans\n\n\n\n\n\n\n\n\n\nJun 30, 2025\n\n4 min\n\n\n\n\n\n\n\n\n\n\n\nRSS Feeds\n\n\n\nR\n\nJavascript\n\ntidyRSS\n\n\n\n\n\n\n\n\n\nJun 15, 2025\n\n2 min\n\n\n\n\n\n\n\n\n\n\n\nWelcome\n\n\n\nQuarto\n\n\n\n\n\n\n\n\n\nJun 2, 2025\n\n2 min\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/RSS_Reader/index0.html",
    "href": "posts/RSS_Reader/index0.html",
    "title": "RSS Feeds",
    "section": "",
    "text": "RSS Readers may not be in fashion but I believe they are on the comeback. Inspired by an article from InfoWorld(Machlis 2022), with some slight modifications, I created an rss feed to list many the research publications. The list of research papers can look overwhelming, but can be refined or filtered using the search boxes.\n\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.2     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.1.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(dplyr)\nlibrary(DT)\nlibrary(purrr)\nlibrary(stringr)\nlibrary(lubridate)\nlibrary(tidyRSS)\n\n\nflag=0\n\nmy_feed &lt;- \"https://rss.arxiv.org/rss/cs.LG\"\n\nresult &lt;- tryCatch(\n  {\n    my_feed_data &lt;- tidyfeed(my_feed)\n    cat(\"Number of items:\", nrow(my_feed_data), \"\\n\")\n    my_feed_data |&gt; \n      select(feed_pub_date, item_title, item_link, item_description)\n  },\n  error = function(e) {\n    cat(\"Error caught:\", e$message, \"\\n\")\n    NULL  # return NULL on error\n  }\n)\n\nGET request successful. Parsing...\n\n\nError caught: subscript out of bounds \n\nif (is.null(result) || nrow(result) == 0) {\n  flag=1\n  cat(\"No papers published today\\n\")\n} else {\n  print(result)\n}\n\nNo papers published today\n\n\n\nif (! flag) {\n  my_feed_data_summary &lt;- my_feed_data |&gt;\n    select(item_title, feed_pub_date, item_link,item_description) }\n\n\nif (! flag) {\n#changed item_title to item_desc\nmy_rss_feed &lt;- my_feed_data_summary |&gt; mutate(\n    item_title = str_glue(\"&lt;a target='_blank' title='{item_title}' href='{item_link}' rel='noopener'&gt;{item_title}&lt;/a&gt;\")\n)}\n\n\nif (! flag) {\n  my_rss_feed_table &lt;- my_rss_feed |&gt; select(-item_link)}\n#my_feed_data_summary\n\n\n\nif (! flag) {\n  DT::datatable(my_rss_feed_table, filter = 'top', escape = FALSE, rownames = FALSE,\n    options = list(\n    search = list(regex = TRUE, caseInsensitive = TRUE),  \n    pageLength = 10,\n    lengthMenu = c(10, 25, 50, 100, 200),\n    autowidth = TRUE,\n   columnDefs = list(list(width = '80%', targets = list(2)))\n    )\n  )}\n\n\n\n\n\n\n\n\n\nReferences\n\nMachlis, Sharon. 2022. “How to Create Your Own RSS Reader with r _ InfoWorld.” InfoWorld, December. https://www.infoworld.com/article/2337738/how-to-create-your-own-rss-reader-with-r.html."
  },
  {
    "objectID": "posts/RSS_Reader/Most_Recent_Papers.html",
    "href": "posts/RSS_Reader/Most_Recent_Papers.html",
    "title": "Recent arXiv Research Papers (Updated M-F)",
    "section": "",
    "text": "GET request successful. Parsing...\n\n\nRecords Retrieved: 247"
  },
  {
    "objectID": "posts/RSS_Reader/index.html",
    "href": "posts/RSS_Reader/index.html",
    "title": "RSS Feeds",
    "section": "",
    "text": "There are more research papers being published than we could ever consume. This RSS Reader gathers the arXiv papers published today and allows us to search through by keywords.\nInspired by an article from InfoWorld (Machlis 2022). Future feads will include more research papers from platforms into a database allowing for a more thorough historical search.\n\n\n\n\nShow the code\n# setup includes libraries and functions\n\nsource(\"RSS_functions.R\",chdir=T)\n\n\n\nContent of RSS_functions.R script\n\n\nShow the code\n# get path to script\npathway &lt;- here::here(\"posts\",\"RSS_Reader\", \"RSS_functions.R\")\n\n# generate output of lines from script\n\nlines &lt;- readLines(pathway, warn=FALSE)\ncat(lines, sep = \"\\n\")\n\n\n# Get the most recent papers function\n\n# Required Libraries\n\nsuppressPackageStartupMessages(library(tidyverse))\nsuppressPackageStartupMessages(library(dplyr))\nlibrary(DT)\nlibrary(tidyRSS)\n\nmost_recent_test &lt;- function(source) {\n  \n  site=source\n  \n  my_feed_data &lt;- tidyfeed(site) |&gt;\n    select(feed_pub_date,item_title, item_link, item_description)\n  \n  my_feed_data_summary &lt;- my_feed_data |&gt;\n    select(item_title, feed_pub_date, item_link,\n           item_description) \n  \n  #changed item_title to item_desc\n  my_rss_feed &lt;- my_feed_data_summary |&gt; mutate(\n    item_title = str_glue(\"&lt;a target='_blank' title='{item_title}' href='{item_link}' rel='noopener'&gt;{item_title}&lt;/a&gt;\")\n  )\n  \n  my_rss_feed_table &lt;- my_rss_feed |&gt; select(-item_link)\n  #my_feed_data_summary\n  \n  \n  return(my_rss_feed_table)  \n}\n\nmost_recent &lt;- function(source) {\n  tryCatch({\n    site &lt;- source\n    my_feed_data &lt;- tidyfeed(site) |&gt;\n      select(feed_pub_date, item_title, item_link, item_description)\n    \n    my_feed_data_summary &lt;- my_feed_data |&gt;\n      select(item_title, feed_pub_date, item_link, item_description) \n    \n    my_rss_feed &lt;- my_feed_data_summary |&gt; mutate(\n      item_title = str_glue(\"&lt;a target='_blank' title='{item_title}' href='{item_link}' rel='noopener'&gt;{item_title}&lt;/a&gt;\")\n    )\n    \n    # Return only the most recent record\n    my_rss_feed_table &lt;- my_rss_feed |&gt; \n      arrange(desc(feed_pub_date)) |&gt; \n      #slice(1) |&gt;\n      select(-item_link)\n    \n    return(my_rss_feed_table)\n  }, error = function(e) {\n    message(\"Error fetching or parsing feed: \", e$message)\n    #return(NA)\n  })\n}\n\n\n#my_rss_feed_table\n\n\nGetting feed for arXiv and checking the number of results. There are no papers on weekends\n\n\nShow the code\nflag=0 #Set Error flag to False\n\n# Call functins in RSS_functions.R\n\nmy_feed &lt;- \"https://rss.arxiv.org/rss/cs.LG\"\n\nrecent_records&lt;-most_recent(my_feed)\n\n\nGET request successful. Parsing...\n\n\nShow the code\n#paste(\"recent records: \", recent_records)\n\n\n#print (result_output)\n\n# Sets flag = 1 when no records retrieved\n\nif (is.null(recent_records) || (length(recent_records) == 1 && is.na(recent_records))) {\n  flag &lt;- 1\n  cat(\"Sorry, no papers published today\\n\")\n} else {\n  cat(\"Records Retrieved:\", nrow(recent_records), \"\\n\")\n  flag &lt;- 0\n}\n\n\nRecords Retrieved: 247 \n\n\nShow the code\ncat(\"flag:\", flag, \"\\n\")\n\n\nflag: 0 \n\n\n\n\nCreating output using DT library\n\n\nShow the code\nif (!flag) {\n  DT::datatable(recent_records, filter = 'top', escape = FALSE, rownames = FALSE,\n    options = list(\n    search = list(regex = TRUE, caseInsensitive = TRUE),  \n    pageLength = 10,\n    lengthMenu = c(10, 25, 50, 100, 200),\n    autowidth = TRUE,\n   columnDefs = list(list(width = '80%', targets = list(2)))\n    )\n  )}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nReferences\n\nMachlis, Sharon. 2022. “How to Create Your Own RSS Reader with r _ InfoWorld.” InfoWorld, December. https://www.infoworld.com/article/2337738/how-to-create-your-own-rss-reader-with-r.html."
  },
  {
    "objectID": "walkthrough.html",
    "href": "walkthrough.html",
    "title": "Hello, Quarto",
    "section": "",
    "text": "Markdown is an easy to read and write text format:\n\nIt’s plain text so works well with version control\nIt can be rendered into HTML, PDF, and more\nLearn more at: https://quarto.org/docs/authoring/"
  },
  {
    "objectID": "walkthrough.html#markdown",
    "href": "walkthrough.html#markdown",
    "title": "Hello, Quarto",
    "section": "",
    "text": "Markdown is an easy to read and write text format:\n\nIt’s plain text so works well with version control\nIt can be rendered into HTML, PDF, and more\nLearn more at: https://quarto.org/docs/authoring/"
  },
  {
    "objectID": "walkthrough.html#code-cell",
    "href": "walkthrough.html#code-cell",
    "title": "Hello, Quarto",
    "section": "Code Cell",
    "text": "Code Cell\nHere is a Python code cell:\n\nimport os\nos.cpu_count()\n\n8"
  },
  {
    "objectID": "walkthrough.html#equation",
    "href": "walkthrough.html#equation",
    "title": "Hello, Quarto",
    "section": "Equation",
    "text": "Equation\nUse LaTeX to write equations:\n\\[\n\\chi' = \\sum_{i=1}^n k_i s_i^2\n\\]"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "Eileen P. Murphy",
    "section": "",
    "text": "This blog centers on the exploration of data discovery and practical data science for implementing the use of machine learning, dashboards, LLMs, LLM Apps by using existing open source tools such as but not limited to R, Python, DuckDB, SQLite, MongoDB, Hadoop, and Spark.\nGoData.ca mission is to explore and replicate already available research and implement actual use cases for implementation.\nEileen Murphy is the owner and contributor to GoData.ca blog."
  },
  {
    "objectID": "about.html#about-the-blog",
    "href": "about.html#about-the-blog",
    "title": "Eileen P. Murphy",
    "section": "",
    "text": "This blog centers on the exploration of data discovery and practical data science for implementing the use of machine learning, dashboards, LLMs, LLM Apps by using existing open source tools such as but not limited to R, Python, DuckDB, SQLite, MongoDB, Hadoop, and Spark.\nGoData.ca mission is to explore and replicate already available research and implement actual use cases for implementation.\nEileen Murphy is the owner and contributor to GoData.ca blog."
  },
  {
    "objectID": "posts/LLM_Demo/index.html",
    "href": "posts/LLM_Demo/index.html",
    "title": "Easily Build Customized LLMs",
    "section": "",
    "text": "One of the use cases for localized LLMs is to help digest new bills, policies, and/or court decisions in an efficient and expedient manner. Journalists frequently encounter brand new material before it becomes public and cannot store the document on any server.\nIn this model, you need to add a complex, detailed, and involved document, in this case it’s the summary of the “One Big Beautiful Bill Act” or some might call the “One Big Bad Bill Act.” Whatever you call it, we’ll refer to it as the OBBBA. It does a pretty good job and you can see how you structure your query makes a difference on the response. Some prompts will be better than others.\nFor best results, I have found that adding other analysis improves the responses and contexts, but here we are just going to have the OBBA summary and text from the government website as a demonstration on how this can be used and test it to see if it would be comprehensive enough for journalists to use.\nThis model uses minimally trained model from OPENAI, and fairly inexpensive of all the models to do the query. Since the subject matter is so narrow - we do not need a big model - just big enough to be fairly responsive to our queries.\nAdding more PDFs will get a richer and more comprehensive output. Working on your queries or prompts will also improve the results.\n\n\n\n\nShow the code\n#Install in packages (pip) in terminal - if missing\n#!pip install python-dotenv\nfrom dotenv import load_dotenv\n#pip install duckdb\nimport duckdb\n#pip install llama_index_core\nfrom llama_index.core import VectorStoreIndex, SimpleDirectoryReader\nimport os #built in package\n#pip install openai\nimport openai\n#pip install textwrap\nimport textwrap \n#pip install llama_index.vector_stores.duckdb\nimport llama_index.vector_stores.duckdb\n#pip install llama-index-embeddings-openai\nfrom llama_index.embeddings.openai import OpenAIEmbedding\n#pip install llama-index-llms-openai\nfrom llama_index.llms.openai import OpenAI\n#pip install gradio\nimport gradio as gr\n\n\n\n\n\n\n\nShow the code\nfile_path = 'persist/my_vector_store.duckdb'\n\n# Check if file exists\nif os.path.exists(file_path):\n  #Delete the file\n  os.remove(file_path)\n  print(\"File deleted successfully\")\nelse:\n  print(\"File doesn't exist - first run - it's all good\")\n\n\nFile deleted successfully\n\n\n\n\n\n\n\nShow the code\nfrom dotenv import load_dotenv\n#load_dotenv()\n\nload_dotenv(dotenv_path=\"secrets/.env\")\n\napi_key = os.getenv('OPENAI_API_KEY')\n\nfrom openai import OpenAI\nclient = OpenAI(api_key=api_key)\n\n\n\n\n\n\n\nShow the code\nfrom llama_index.core import VectorStoreIndex, SimpleDirectoryReader\nfrom llama_index.vector_stores.duckdb import DuckDBVectorStore\nfrom llama_index.core import StorageContext\n\nvector_store = DuckDBVectorStore(\"my_vector_store.duckdb\", persist_dir=\"persist/\")\ndocuments = SimpleDirectoryReader(\"/Users/Eileen/Desktop/GoData/Blog/posts/LLM_Demo/OBBBA/\").load_data()\n\n\n\n\n\n\n\nShow the code\nstorage_context = StorageContext.from_defaults(vector_store=vector_store)\nindex = VectorStoreIndex.from_documents(documents, storage_context=storage_context)"
  },
  {
    "objectID": "posts/RSS_Reader/Most_Recent_Papers.html#make-sure-that-are-papers-published-today",
    "href": "posts/RSS_Reader/Most_Recent_Papers.html#make-sure-that-are-papers-published-today",
    "title": "Recent arXiv Research Papers (Updated M-F)",
    "section": "",
    "text": "flag=0\n\nmy_feed &lt;- \"https://rss.arxiv.org/rss/cs.LG\"\n\nresult &lt;- tryCatch(\n  {\n    my_feed_data &lt;- tidyfeed(my_feed)\n    cat(\"Number of items:\", nrow(my_feed_data), \"\\n\")\n    my_feed_data |&gt; \n      select(feed_pub_date, item_title, item_link, item_description)\n  },\n  error = function(e) {\n    cat(\"Error caught:\", e$message, \"\\n\")\n    NULL  # return NULL on errorde\n  }\n)\n\nError caught: could not find function \"tidyfeed\" \n\nif (is.null(result) || nrow(result) == 0) {\n  flag=1\n  cat(\"Sorry, no papers published today\\n\")\n} else {\n  print(result)\n}\n\nSorry, no papers published today\n\n\n```"
  },
  {
    "objectID": "posts/RSS_Reader/Most_Recent_Papers.html#define-most-recent-function",
    "href": "posts/RSS_Reader/Most_Recent_Papers.html#define-most-recent-function",
    "title": "Recent arXiv Research Papers (Updated M-F)",
    "section": "Define most recent function",
    "text": "Define most recent function"
  },
  {
    "objectID": "posts/RSS_Reader/Most_Recent_Papers.html#make-sure-that-are-papers-in-the-pipeline-today",
    "href": "posts/RSS_Reader/Most_Recent_Papers.html#make-sure-that-are-papers-in-the-pipeline-today",
    "title": "Recent arXiv Research Papers (Updated M-F)",
    "section": "",
    "text": "GET request successful. Parsing...\n\n\nNumber of items: 179"
  },
  {
    "objectID": "posts/LLM_Demo/index.html#introduction",
    "href": "posts/LLM_Demo/index.html#introduction",
    "title": "Easily Build Customized LLMs",
    "section": "",
    "text": "One of the use cases for localized LLMs is to help digest new bills, policies, and/or court decisions in an efficient and expedient manner. Journalists frequently encounter brand new material before it becomes public and cannot store the document on any server.\nIn this model, you need to add a complex, detailed, and involved document, in this case it’s the summary of the “One Big Beautiful Bill Act” or some might call the “One Big Bad Bill Act.” Whatever you call it, we’ll refer to it as the OBBBA. It does a pretty good job and you can see how you structure your query makes a difference on the response. Some prompts will be better than others.\nFor best results, I have found that adding other analysis improves the responses and contexts, but here we are just going to have the OBBA summary and text from the government website as a demonstration on how this can be used and test it to see if it would be comprehensive enough for journalists to use.\nThis model uses minimally trained model from OPENAI, and fairly inexpensive of all the models to do the query. Since the subject matter is so narrow - we do not need a big model - just big enough to be fairly responsive to our queries.\nAdding more PDFs will get a richer and more comprehensive output. Working on your queries or prompts will also improve the results.\n\n\n\n\nShow the code\n#Install in packages (pip) in terminal - if missing\n#!pip install python-dotenv\nfrom dotenv import load_dotenv\n#pip install duckdb\nimport duckdb\n#pip install llama_index_core\nfrom llama_index.core import VectorStoreIndex, SimpleDirectoryReader\nimport os #built in package\n#pip install openai\nimport openai\n#pip install textwrap\nimport textwrap \n#pip install llama_index.vector_stores.duckdb\nimport llama_index.vector_stores.duckdb\n#pip install llama-index-embeddings-openai\nfrom llama_index.embeddings.openai import OpenAIEmbedding\n#pip install llama-index-llms-openai\nfrom llama_index.llms.openai import OpenAI\n#pip install gradio\nimport gradio as gr\n\n\n\n\n\n\n\nShow the code\nfile_path = 'persist/my_vector_store.duckdb'\n\n# Check if file exists\nif os.path.exists(file_path):\n  #Delete the file\n  os.remove(file_path)\n  print(\"File deleted successfully\")\nelse:\n  print(\"File doesn't exist - first run - it's all good\")\n\n\nFile deleted successfully\n\n\n\n\n\n\n\nShow the code\nfrom dotenv import load_dotenv\n#load_dotenv()\n\nload_dotenv(dotenv_path=\"secrets/.env\")\n\napi_key = os.getenv('OPENAI_API_KEY')\n\nfrom openai import OpenAI\nclient = OpenAI(api_key=api_key)\n\n\n\n\n\n\n\nShow the code\nfrom llama_index.core import VectorStoreIndex, SimpleDirectoryReader\nfrom llama_index.vector_stores.duckdb import DuckDBVectorStore\nfrom llama_index.core import StorageContext\n\nvector_store = DuckDBVectorStore(\"my_vector_store.duckdb\", persist_dir=\"persist/\")\ndocuments = SimpleDirectoryReader(\"/Users/Eileen/Desktop/GoData/Blog/posts/LLM_Demo/OBBBA/\").load_data()\n\n\n\n\n\n\n\nShow the code\nstorage_context = StorageContext.from_defaults(vector_store=vector_store)\nindex = VectorStoreIndex.from_documents(documents, storage_context=storage_context)"
  },
  {
    "objectID": "posts/LLM_Demo/index.html#deployment",
    "href": "posts/LLM_Demo/index.html#deployment",
    "title": "Easily Build Customized LLMs",
    "section": "Deployment",
    "text": "Deployment\nLLM_Demo is deployed here: \nOr scroll below and try it out!\n\n\nShow the code\nfrom IPython.display import IFrame\n\n# Create an IFrame object\n# Parameters: url, width, height\niframe = IFrame(src=\"https://godata-llm-demo.hf.space\", width=1000, height=5000)\n# Display the iframe\niframe"
  },
  {
    "objectID": "posts/RSS_Reader/index.html#a-title",
    "href": "posts/RSS_Reader/index.html#a-title",
    "title": "RSS Feeds",
    "section": "A title",
    "text": "A title\n\n\n\n\n\n\nLorem ipsum dolor sit amet, consectetur adipiscing elit. Duis sagittis posuere ligula sit amet lacinia. Duis dignissim pellentesque magna, rhoncus congue sapien finibus mollis. Ut eu sem laoreet, vehicula ipsum in, convallis erat. Vestibulum magna sem, blandit pulvinar augue sit amet, auctor malesuada sapien. Nullam faucibus leo eget eros hendrerit, non laoreet ipsum lacinia. Curabitur cursus diam elit, non tempus ante volutpat a. Quisque hendrerit blandit purus non fringilla. Integer sit amet elit viverra ante dapibus semper. Vestibulum viverra rutrum enim, at luctus enim posuere eu. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.\n\n\nRSS Readers may not be in fashion but I believe they are on the comeback. Inspired by an article from InfoWorld(Machlis 2022), with some slight modifications, I created an rss feed to list many the research publications. The list of research papers can look overwhelming, but can be refined or filtered using the search boxes.\n\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.2     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.1.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\nlibrary(dplyr)\nlibrary(DT)\nlibrary(purrr)\nlibrary(stringr)\nlibrary(lubridate)\nlibrary(tidyRSS)\n\n\nflag=0\n\nmy_feed &lt;- \"https://rss.arxiv.org/rss/cs.LG\"\n\nresult &lt;- tryCatch(\n  {\n    my_feed_data &lt;- tidyfeed(my_feed)\n    cat(\"Number of items:\", nrow(my_feed_data), \"\\n\")\n    my_feed_data |&gt; \n      select(feed_pub_date, item_title, item_link, item_description)\n  },\n  error = function(e) {\n    cat(\"Error caught:\", e$message, \"\\n\")\n    NULL  # return NULL on errorde\n  }\n)\n\nGET request successful. Parsing...\n\n\nNumber of items: 198 \n\nif (is.null(result) || nrow(result) == 0) {\n  flag=1\n  cat(\"Sorry, no papers published today\\n\")\n} else {\n  print(result)\n}\n\n# A tibble: 198 × 4\n   feed_pub_date       item_title                     item_link item_description\n   &lt;dttm&gt;              &lt;chr&gt;                          &lt;chr&gt;     &lt;chr&gt;           \n 1 2025-08-11 00:00:00 Diagrams-to-Dynamics (D2D): E… https://… arXiv:2508.0565…\n 2 2025-08-11 00:00:00 A Graph Neural Network Approa… https://… arXiv:2508.0572…\n 3 2025-08-11 00:00:00 Machine Learning-Based Nonlin… https://… arXiv:2508.0577…\n 4 2025-08-11 00:00:00 From Imperfect Signals to Tru… https://… arXiv:2508.0579…\n 5 2025-08-11 00:00:00 Optimal Linear Baseline Model… https://… arXiv:2508.0583…\n 6 2025-08-11 00:00:00 An Effective Approach for Nod… https://… arXiv:2508.0583…\n 7 2025-08-11 00:00:00 A Markov Decision Process Fra… https://… arXiv:2508.0587…\n 8 2025-08-11 00:00:00 The Fourth State: Signed-Zero… https://… arXiv:2508.0590…\n 9 2025-08-11 00:00:00 Dual Signal Decomposition of … https://… arXiv:2508.0591…\n10 2025-08-11 00:00:00 Fast, Convex and Conditioned … https://… arXiv:2508.0592…\n# ℹ 188 more rows\n\n\n\nif (! flag) {\n  my_feed_data_summary &lt;- my_feed_data |&gt;\n    select(item_title, feed_pub_date, item_link,item_description) }\n\n\nif (! flag) {\n#changed item_title to item_desc\nmy_rss_feed &lt;- my_feed_data_summary |&gt; mutate(\n    item_title = str_glue(\"&lt;a target='_blank' title='{item_title}' href='{item_link}' rel='noopener'&gt;{item_title}&lt;/a&gt;\")\n)}\n\n\nif (! flag) {\n  my_rss_feed_table &lt;- my_rss_feed |&gt; select(-item_link)}\n#my_feed_data_summary\n\n\n\nif (! flag) {\n  DT::datatable(my_rss_feed_table, filter = 'top', escape = FALSE, rownames = FALSE,\n    options = list(\n    search = list(regex = TRUE, caseInsensitive = TRUE),  \n    pageLength = 10,\n    lengthMenu = c(10, 25, 50, 100, 200),\n    autowidth = TRUE,\n   columnDefs = list(list(width = '80%', targets = list(2)))\n    )\n  )}"
  },
  {
    "objectID": "posts/RSS_Reader/index_2.html",
    "href": "posts/RSS_Reader/index_2.html",
    "title": "RSS Feeds",
    "section": "",
    "text": "There are more research papers being published than we could ever consume. This RSS Reader gathers the arXiv papers published today and allows us to search through by keywords.\nInspired by an article from InfoWorld (Machlis 2022). Future feads will include more research papers from platforms into a database allowing for a more thorough historical search.\n\n\n\n# setup includes libraries and functions\n\nsource(\"RSS_functions.R\",chdir=T)\n\n\nContent of RSS_functions.R script\n\n# get path to script\npathway &lt;- here::here(\"posts\",\"RSS_Reader\", \"RSS_functions.R\")\n\n# generate output of lines from script\n\nlines &lt;- readLines(pathway, warn=FALSE)\ncat(lines, sep = \"\\n\")\n\n# Get the most recent papers function\n\nsuppressPackageStartupMessages(library(tidyverse))\nsuppressPackageStartupMessages(library(dplyr))\nlibrary(DT)\nlibrary(tidyRSS)\n\nmost_recent &lt;- function(source) {\n  \n  site=source\n  \n  my_feed_data &lt;- tidyfeed(site) |&gt;\n    select(feed_pub_date,item_title, item_link, item_description)\n  \n  my_feed_data_summary &lt;- my_feed_data |&gt;\n    select(item_title, feed_pub_date, item_link,\n           item_description) \n  \n  #changed item_title to item_desc\n  my_rss_feed &lt;- my_feed_data_summary |&gt; mutate(\n    item_title = str_glue(\"&lt;a target='_blank' title='{item_title}' href='{item_link}' rel='noopener'&gt;{item_title}&lt;/a&gt;\")\n  )\n  \n  my_rss_feed_table &lt;- my_rss_feed |&gt; select(-item_link)\n  #my_feed_data_summary\n  \n  \n  return(my_rss_feed_table)  \n}\n\n\ntryCatch &lt;- function(my_rss_feed_table) {\n  result &lt;- paste(nrow(my_rss_feed_table),\"\\n\")\n  print(result)\n}\n\n\nGetting feed for arXiv and checking the number of results. There are no papers on weekends\n\nflag=0 #Set Error flag to False\n\nmy_feed &lt;- \"https://rss.arxiv.org/rss/cs.LG\"\n\n\n# Call functins in RSS_functions.R\ninitial_results &lt;- most_recent(my_feed) # Records Retreived\n\nGET request successful. Parsing...\n\nresult &lt;- tryCatch(initial_results) # Catch error if no results\n\n[1] \"427 \\n\"\n\n#paste(\"tryCatch: \", result) #Shows result of retrieval\n\n# Sets flag = 1 when no records retrieved\n\nif (is.null(result)) {\n  flag=1 # Sets Error flag = True\n  cat(\"Sorry, no papers published today\\n\") \n} else {paste(\"Records Retrieved:\", result)}\n\n[1] \"Records Retrieved: 427 \\n\"\n\n\n\n\nCreating output using DT library\n\nif (! flag) {\n  DT::datatable(initial_results, filter = 'top', escape = FALSE, rownames = FALSE,\n    options = list(\n    search = list(regex = TRUE, caseInsensitive = TRUE),  \n    pageLength = 10,\n    lengthMenu = c(10, 25, 50, 100, 200),\n    autowidth = TRUE,\n   columnDefs = list(list(width = '80%', targets = list(2)))\n    )\n  )}\n\n\n\n\n\n\n\n\n\n\n\n\n\nReferences\n\nMachlis, Sharon. 2022. “How to Create Your Own RSS Reader with r _ InfoWorld.” InfoWorld, December. https://www.infoworld.com/article/2337738/how-to-create-your-own-rss-reader-with-r.html."
  },
  {
    "objectID": "posts/RSS_Reader/Most_Recent_Papers_2.html",
    "href": "posts/RSS_Reader/Most_Recent_Papers_2.html",
    "title": "Recent arXiv Research Papers (Updated M-F)",
    "section": "",
    "text": "Set up librarys and"
  },
  {
    "objectID": "posts/pyspark/cafc_merge_data.html",
    "href": "posts/pyspark/cafc_merge_data.html",
    "title": "Data Pipelines using Pyspark",
    "section": "",
    "text": "#| echo: true\n%run cafc_quarterly_fraud_data_pipeline.py\n\n# Load necessary libraries\n# install.packages(\"tidyverse\")\nlibrary(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.2     ✔ tibble    3.3.0\n✔ lubridate 1.9.4     ✔ tidyr     1.3.1\n✔ purrr     1.1.0     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\n\n# Set the directory where your partitioned CSV files are located\ndata_directory &lt;- \"outputs_2025_Q2/cleaned_cafc\"\ndata_directory\n\n[1] \"outputs_2025_Q2/cleaned_cafc\"\n\n\n\n# Get a list of all CSV file paths\nfile_paths &lt;- list.files(path = data_directory, pattern = \"\\\\.csv$\", all.files = TRUE, full.names = TRUE)\nfile_paths\n\n[1] \"outputs_2025_Q2/cleaned_cafc/part-00000-26c7da18-5d8f-4d23-a755-48883dd69677-c000.csv\"\n[2] \"outputs_2025_Q2/cleaned_cafc/part-00001-26c7da18-5d8f-4d23-a755-48883dd69677-c000.csv\"\n[3] \"outputs_2025_Q2/cleaned_cafc/part-00002-26c7da18-5d8f-4d23-a755-48883dd69677-c000.csv\"\n[4] \"outputs_2025_Q2/cleaned_cafc/part-00003-26c7da18-5d8f-4d23-a755-48883dd69677-c000.csv\"\n[5] \"outputs_2025_Q2/cleaned_cafc/part-00004-26c7da18-5d8f-4d23-a755-48883dd69677-c000.csv\"\n[6] \"outputs_2025_Q2/cleaned_cafc/part-00005-26c7da18-5d8f-4d23-a755-48883dd69677-c000.csv\"\n[7] \"outputs_2025_Q2/cleaned_cafc/part-00006-26c7da18-5d8f-4d23-a755-48883dd69677-c000.csv\"\n[8] \"outputs_2025_Q2/cleaned_cafc/part-00007-26c7da18-5d8f-4d23-a755-48883dd69677-c000.csv\"\n\n\n\n# Read and combine all CSV files into a single data frame\nmerged_df &lt;- file_paths %&gt;%\n  map_dfr(read_csv, show_col_types = FALSE)\n\n\n# View the first few rows of the merged data frame\nhead(merged_df)\n\n# A tibble: 6 × 13\n     id date       complaint_type country province   fraud_cat sol_method gender\n  &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;      &lt;chr&gt;     &lt;chr&gt;      &lt;chr&gt; \n1     2 2021-01-02 CAFC Website   Canada  Quebec     Merchand… Internet   Male  \n2     4 2021-01-02 CAFC Website   Canada  British C… Vendor F… Text mess… Male  \n3     5 2021-01-02 NCFRS          Canada  Alberta    Merchand… Internet   Female\n4     6 2021-01-02 CAFC Website   Canada  Ontario    Phishing  Text mess… Male  \n5     8 2021-01-02 CAFC Website   Canada  Saskatche… Merchand… Other/unk… Not A…\n6     9 2021-01-02 CAFC Website   Canada  British C… Job       Internet-… Female\n# ℹ 5 more variables: lang_cor &lt;chr&gt;, age_range &lt;chr&gt;, complaint_subtype &lt;chr&gt;,\n#   num_victims &lt;dbl&gt;, dollar_loss &lt;dbl&gt;"
  },
  {
    "objectID": "posts/pyspark/index.html",
    "href": "posts/pyspark/index.html",
    "title": "Data Pipelines with Pyspark",
    "section": "",
    "text": "Note\n\n\n\nUpdated 2025-10-15 Updated CAFC data with Q3 data published Oct 2, 2025.\nImproved automation to process files."
  },
  {
    "objectID": "posts/pyspark/index.html#introduction",
    "href": "posts/pyspark/index.html#introduction",
    "title": "Data Pipelines with Pyspark",
    "section": "Introduction",
    "text": "Introduction\nPyspark is an invaluable tool to process datasets in parallel partitions for processing efficiency. The data can be written and merged to another file with many different options in format, such as csv, tsv, json, parquet, and xml.\nThe structured pipeline once written will always be reproducible and easy to maintain.\nThe Canadian Anti-Fraud Centre updates and its data dictionary are available and updated every quarter on the CKAN platform on the Open Government Portal. The CKAN platform allows federal and municipal governments as well as companies to maintain their catalog of datasets in a consistent and transparent way, whether it’s public or private to all their users."
  },
  {
    "objectID": "posts/pyspark/index.html#deployment",
    "href": "posts/pyspark/index.html#deployment",
    "title": "Data Pipelines with Pyspark",
    "section": "Deployment",
    "text": "Deployment\n\n\nShow the code\nlibrary(stringr)\n\nCAFC_latest_update &lt;- str_sub(extract_dir, -7)\npaste(\"CAFC Latest Update\", CAFC_latest_update, sep= \" : \")\n\n\n[1] \"CAFC Latest Update : 2025_Q3\"\n\n\n\nDownload CSV files directly\n\n\nShow the code\nlibrary(downloadthis)\n\n#Sys.setlocale(\"LC_NUMERIC\", \"C\")\n#options(OutDec = \".\")\n\nmerged_df |&gt;\n  download_this(\n    output_name = \"clean_cafc_en\",\n    output_extension = \".csv\",\n    button_label = \"Download clean_cafc_en\",\n    button_type = \"default\",\n    self_contained = TRUE,\n    has_icon = TRUE,\n    icon = \"fa fa-save\",\n    id = \"cafc-btn\",\n    csv2 = FALSE      # Use write_csv(), dot decimal, comma separator\n  )\n\n\n Download clean_cafc_en\n\n\n\n\nShow the code\nlibrary(downloadthis)\n\nmonthly_summary_df %&gt;%\n  download_this(\n    output_name = \"cafc_monthly_summary_en\",\n    output_extension = \".csv\",\n    button_label = \"Download cafc_monthly_summary_en.csv\",\n    button_type = \"default\",\n    self_contained = TRUE,\n    has_icon = TRUE,\n    icon = \"fa fa-save\",\n    id = \"cafc-btn\",\n    csv2 = FALSE \n  )\n\n\n Download cafc_monthly_summary_en.csv\n\n\n\n\nShow the code\nlibrary(downloadthis)\n\nyearly_summary_df %&gt;%\n  download_this(\n    output_name = \"cafc_yearly_summary_en\",\n    output_extension = \".csv\",\n    button_label = \"Download cafc_yearly_summary_en.csv\",\n    button_type = \"default\",\n    self_contained = TRUE,\n    has_icon = TRUE,\n    icon = \"fa fa-save\",\n    id = \"cafc-btn\",\n    csv2 = FALSE \n  )\n\n\n Download cafc_yearly_summary_en.csv"
  },
  {
    "objectID": "posts/test/testplot.html",
    "href": "posts/test/testplot.html",
    "title": "Untitled",
    "section": "",
    "text": "library(readr)\nlibrary(dplyr)\n\n\nAttaching package: 'dplyr'\n\n\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n\n\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n\nlibrary(ggplot2)\nlibrary(lubridate)\n\n\nAttaching package: 'lubridate'\n\n\nThe following objects are masked from 'package:base':\n\n    date, intersect, setdiff, union\n\n# Paste your data as a string\ncsv_data &lt;- \"year;month;total_loss;total_victims\n2021;1;12894119,87;4411\n2021;2;27042043,27;5055\n2021;3;17017937,67;6111\n2021;4;22120277,22;4711\n2021;5;19401051,74;4348\n2021;6;19796860,95;4633\n2021;7;21723251,47;4525\n2021;8;21036153,60;4211\n2021;9;28828754,70;3739\n2021;10;33303225,59;3660\n2021;11;41681068,45;3672\n2021;12;44625562,72;3754\n2022;1;31814962,40;4041\n2022;2;36026119,84;3299\n2022;3;43628771,24;4432\n2022;4;36476311,04;4577\n2022;5;38666778,10;4548\n2022;6;30129928,36;4157\n2022;7;28081496,50;3854\n2022;8;31819633,63;3954\n2022;9;31264147,37;3524\n2022;10;49055187,23;3361\n2022;11;54803160,95;3849\n2022;12;32626793,71;3941\n2023;1;37670116,02;3522\n2023;2;43413776,54;3179\n2023;3;41137878,02;3680\n2023;4;33922844,57;1843\n2023;5;51638152,13;3136\n2023;6;48023733,31;3280\n2023;7;32043429,73;3192\n2023;8;43296721,84;2906\n2023;9;43249536,17;2902\n2023;10;41146026,32;2839\n2023;11;39028500,22;2528\n2023;12;43028135,00;2707\n2024;1;34450108,75;2657\n2024;2;34808929,03;2481\n2024;3;31594065,16;2241\n2024;4;59771349,65;2658\n2024;5;34796328,01;2653\n2024;6;52479479,07;2370\n2024;7;40049224,25;2317\n2024;8;33966270,42;2704\n2024;9;48044584,96;2565\n2024;10;50380513,42;2568\n2024;11;61345205,55;2513\n2024;12;45395149,66;2514\n2025;1;34082138,32;2574\n2025;2;43393669,67;2278\n2025;3;52804058,12;2869\n2025;4;51230348,80;2400\n2025;5;44634331,50;2225\n2025;6;43961480,63;1835\"\n\n# Read the data\ndata &lt;- read_delim(csv_data, delim = \";\", col_types='iidn')\n\nWarning: One or more parsing issues, call `problems()` on your data frame for details,\ne.g.:\n  dat &lt;- vroom(...)\n  problems(dat)\n\ndata$total_loss &lt;- as.numeric(gsub(\",\", \".\", data$total_loss))\n\n# Create a date variable (first day of each month)\ndata &lt;- data %&gt;%\n  mutate(date = ymd(sprintf(\"%d-%02d-01\", year, month)))\n\n# Plot\nggplot(data, aes(x = date, y = total_loss)) +\n  geom_line(color = \"blue\", size = 1) +\n  scale_x_date(date_labels = \"%Y-%m\", date_breaks = \"3 months\") +\n  labs(title = \"Monthly Total Losses Reported to CAFC\", x = \"Year-Month\", y = \"Total Loss ($)\") +\n  theme_minimal() +\n  theme(axis.text.x=element_text(angle=45, hjust=1))\n\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n\n\nWarning: Removed 54 rows containing missing values or values outside the scale range\n(`geom_line()`)."
  },
  {
    "objectID": "posts/LLM_Demo/LLM_Demo_OBBBA.html",
    "href": "posts/LLM_Demo/LLM_Demo_OBBBA.html",
    "title": "Dig into the One Big Beautiful (Bad) Bill Act",
    "section": "",
    "text": "This is a small customized LLM with actual text of the Act uploaded into the model. The Act was passed by both the House and Senate and has become law. The Democrats, who until now because they do not control the House or Senate have refused to vote to continue funding this act because of the problem with people currently enrolled in the ACA will have increased premiums.\nThe source document is available here: One Big Beautiful Bill Act\nSince LLMs are notorious for generating inaccurate responses, it’s a good idea to make sure you ask for the provision or section number when querying so it can be verified with the source document. Specififying “output to list” clarifies the output to a list, if needed.\nSuggested Prompts:\nHow are Medicaid programs affected? List provision or section number for verification. Output list.\nHow are SNAP programs affected? List provision or section number for verification. Output list.\nWhat are all the environmental reductions, rescinds, and rescissions? List provisions and section number for verification. Output to list.\nWhat are all the environmental increases, and or establishment appropriations (not rescissions)? List provisions and section number for verification. Output list.\nWhat are all the welfare reductions, and rescissions. List provisions and section number for verification. Output list.\nWhat are all the law enforcement reductions, and rescissions. List provisions and section number for verification. Output list.\nWhat are all the law enforcement increases and or appropriations? List provisions and section number for verification. Output list.\nWhat are all the welfare appropriations, and increases?. List provisions and section number for verification. Output list.\nWhat is the DOJ fund named ”BIDEN.” What is it used for? list by item. What provision is it under? How much is being appropriated for it?\nHow is FEMA being appropriated? List the provision or section number along with description for verification. Is FEMA still going to be used for disaster recovery?"
  },
  {
    "objectID": "posts/LLM_Demo/LLM_Demo_OBBBA.html#introduction",
    "href": "posts/LLM_Demo/LLM_Demo_OBBBA.html#introduction",
    "title": "Easily Build Customized LLMs",
    "section": "",
    "text": "from IPython.display import IFrame\n\n# Create an IFrame object\n# Parameters: url, width, height\n\niframe = IFrame('https://godata-llm-demo.hf.space', width=850, height=800)\n# Display the iframe\niframe"
  },
  {
    "objectID": "posts/pyspark/index.html#process",
    "href": "posts/pyspark/index.html#process",
    "title": "Data Pipelines with Pyspark",
    "section": "Process",
    "text": "Process\nIn this exercise, we are going to use the Canadian Anti-Fraud Centre Reporting Dataset on the CKAN platform and do the following:\n1. Extract english and french field names into 2 datasets to represent English and French distinct but replicated datasets (in progress).\n2. Change date type to date and change fields to numeric that we want to aggregate.\n3. Include monthly and yearly aggregate datasets.\n4. Filter out invalid records that have invalid Country names.\n5. Streamline access to new generated datasets by downloading csv files to local drive.\n\nFunction to run script to update datasets every quarter\n\n\nShow the code\n# Don't run this here - put this in cronjob or github actions to update cafc dataset every quarter\n#%run cafc_quarterly_fraud_data_pipeline.py #Set up on cronjob to run each quarter\n\n\n\n\nContents of script to run to update datasets - only to be run once every quarter\n\n\nShow the code\n#remove include (above) to generate lines of code used to extact cafc data\n# get path to script\npathway &lt;- here::here(\"posts\",\"pyspark\",\"cafc_quarterly_fraud_data_pipeline.py\")\n\n# generate output of lines from script\n\nlines &lt;- readLines(pathway, warn=FALSE)\n\n#Uncomment next line for code source\n\n#cat(lines, sep = \"\\n\")\n\n\n\n\nRequired Libraries\n\n\nShow the code\n# Load necessary libraries\n# install.packages(\"tidyverse\")\nsuppressPackageStartupMessages(library(tidyverse))\n\n\n\n\nFind latest extracted cleaned cafc file\n\n\nShow the code\n# Clean (base) directory for posts\ncafc_clean &lt;- here::here(\"posts\", \"pyspark\")\n\n# Get a list of all output directories matching the pattern\ncsv_dir &lt;- list.files(path = cafc_clean, pattern = \"outputs_*\", all.files = TRUE, full.names = TRUE)\n\n# Get the most recent output directory (assuming sorted filenames)\nextract_dir &lt;- max(csv_dir)\n\n# Concatenate the extracted directory and \"cleaned_cafc\" subdirectory correctly\ncleaned_cafc_path &lt;- file.path(extract_dir, \"cleaned_cafc\")\n\n# Get all CSVs\nfile_paths &lt;- list.files(path = cleaned_cafc_path, pattern = \"\\\\.csv$\", all.files = TRUE, full.names = TRUE)\n\n\n\n\nMerge the partitions to one file\n\n\nShow the code\n# Read and combine all CSV files into a single data frame\nmerged_df &lt;- file_paths |&gt;\n  map_dfr(read_csv, show_col_types = FALSE)\n\n\n\n\nShow sample records of merged CAFC dataset\n\n\nShow the code\n# View the first few rows of the merged data frame\nhead(merged_df)\n\n\n# A tibble: 6 × 13\n      id date       complaint_type country province fraud_cat  sol_method gender\n   &lt;dbl&gt; &lt;date&gt;     &lt;chr&gt;          &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt; \n1 350308 2025-09-29 Phone          Canada  Ontario  Personal … Direct ca… Female\n2 350309 2025-09-29 Phone          Canada  Quebec   Identity … Other/unk… Male  \n3 350310 2025-09-29 Phone          Canada  Quebec   Extortion  Direct ca… Female\n4 350311 2025-09-29 Phone          Canada  Ontario  Identity … Other/unk… Female\n5 350312 2025-09-29 Phone          Canada  Manitoba Identity … Other/unk… Female\n6 350313 2025-09-29 Phone          Canada  Alberta  Investmen… Internet   Male  \n# ℹ 5 more variables: lang_cor &lt;chr&gt;, age_range &lt;chr&gt;, complaint_subtype &lt;chr&gt;,\n#   num_victims &lt;dbl&gt;, dollar_loss &lt;dbl&gt;\n\n\n\n\nRetrieve monthly summaries\n\n\nShow the code\n# Concatenate the extracted directory and \"cleaned_cafc\" subdirectory correctly\ncleaned_monthly_summary_path &lt;- file.path(extract_dir, \"monthly_summary\")\n\nfile_paths &lt;- list.files(path = cleaned_monthly_summary_path, pattern = \"\\\\.csv$\", all.files = TRUE, full.names = TRUE)\n\nmonthly_summary_df &lt;- file_paths %&gt;%\n  map_dfr(read_csv, show_col_types = FALSE)\n\n\n\n\nShow sample of monthly summary of victims\n\n\nShow the code\nhead(monthly_summary_df)\n\n\n# A tibble: 6 × 4\n   year month total_loss total_victims\n  &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt;         &lt;dbl&gt;\n1  2021     1  12894120.          4411\n2  2021     2  27042043.          5055\n3  2021     3  17017938.          6111\n4  2021     4  22120277.          4711\n5  2021     5  19401052.          4348\n6  2021     6  19796861.          4633\n\n\n\n\nRetrieve yearly summaries of victims\n\n\nShow the code\ncleaned_yearly_summary_path &lt;- file.path(extract_dir, \"yearly_summary\")\n\n\nfile_paths &lt;- list.files(path = cleaned_yearly_summary_path, pattern = \"\\\\.csv$\", all.files = TRUE, full.names = TRUE)\n\nyearly_summary_df &lt;- file_paths %&gt;%\n  map_dfr(read_csv, show_col_types = FALSE)\n\n\n\n\nShow sample records of yearly summaries of victims\n\n\nShow the code\nhead(yearly_summary_df)\n\n\n# A tibble: 5 × 3\n   year total_loss total_victims\n  &lt;dbl&gt;      &lt;dbl&gt;         &lt;dbl&gt;\n1  2021 309470943.         52832\n2  2022 444355315.         47551\n3  2023 497239290.         35746\n4  2024 524288975.         30253\n5  2025 439048068.         19264"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html",
    "href": "posts/CAFC_2025Q3_Analysis/index.html",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "",
    "text": "Note\n\n\n\nUpdated 2026-01-11 Updates for CAFC - No updates yet for 2025 Q4."
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#cafc-fraud-annual-total-loss-vs-number-of-victims",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#cafc-fraud-annual-total-loss-vs-number-of-victims",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "CAFC Fraud: Annual Total Loss vs Number of Victims",
    "text": "CAFC Fraud: Annual Total Loss vs Number of Victims\n\n\nShow the code\noptions(scipen = 999)\nyearly_plot &lt;- ggplot(cafc_yearly, \n                      aes(x=year)) +\n                geom_col(aes(y=total_loss/1000000), fill=\"steelblue\") +\n                geom_line(aes(y=total_victims/1000), color=\"red\", group=1) +\n                geom_point(aes(y=total_victims/1000),color=\"red\", size=3) +\n                scale_y_continuous(\n                   name = \"Total Loss (Millions CAD)\",\n                   sec.axis = sec_axis(~. * 1000, name = \"Total Victims\")\n                ) +\n                labs(\n                  title = \"CAFC Fraud: Annual Total Loss vs Number of Victims\",\n                  subtitle = \"Blue bars: Total Loss (Millions CAD), Red line: Number of Victims\",\n                  x = \"Year\"\n                ) +\n                theme_minimal()\nprint(yearly_plot)"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#monthly-fraud-loss-trends",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#monthly-fraud-loss-trends",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Monthly Fraud Loss Trends",
    "text": "Monthly Fraud Loss Trends\n\n\nShow the code\n# Create visualization 2: Monthly fraud loss trends\n# Create a date column for better plotting\ncafc_monthly$date &lt;- as.Date(paste(cafc_monthly$year, cafc_monthly$month, \"01\", sep = \"-\"))\n\nmonthly_plot &lt;- ggplot(cafc_monthly, aes(x = date, y = total_loss/1000000)) +\n  geom_line(color = \"navy\", linewidth = 1) +\n  geom_point(color = \"darkred\") +\n  labs(\n    title = \"Monthly Fraud Loss Trends\",\n    subtitle = \"CAFC Data: January 2021 - Present\",\n    x = \"Month\",\n    y = \"Total Loss (Millions CAD)\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1)\n  ) +\n  scale_x_date(date_labels = \"%Y-%m\", date_breaks = \"6 months\")\n\nprint(monthly_plot)"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#top-10-fraud-categories",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#top-10-fraud-categories",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Top 10 Fraud Categories",
    "text": "Top 10 Fraud Categories\n\n\nShow the code\n# Create visualization 3: Fraud categories from detailed dataset\n# Get top fraud categories\nfraud_summary &lt;- table(cafc_clean$fraud_cat)\nfraud_df &lt;- data.frame(\n  fraud_type = names(fraud_summary),\n  count = as.numeric(fraud_summary)\n) \n\n# Sort and take top 10\nfraud_df &lt;- fraud_df[order(fraud_df$count, decreasing = TRUE), ]\ntop_fraud &lt;- fraud_df[1:10, ]\n\n# Create the plot\nfraud_plot &lt;- ggplot(top_fraud, aes(x = reorder(fraud_type, count), y = count)) +\n  geom_col(fill = \"coral\", alpha = 0.8) +\n  coord_flip() +\n  labs(\n    title = \"Top 10 Fraud Categories\",\n    subtitle = \"Based on number of reported complaints\",\n    x = \"Fraud Category\",\n    y = \"Number of Reports\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 8, face = \"bold\"),\n    axis.text.y = element_text(size = 10)\n  ) +\n  geom_text(aes(label = scales::comma(count)), hjust = -0.1, size = 2)\n\nprint(fraud_plot)"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#fraud-reports-by-provinceterritory",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#fraud-reports-by-provinceterritory",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Fraud Reports by Province/Territory",
    "text": "Fraud Reports by Province/Territory\n\n\nShow the code\n# Create visualization 4: Fraud by Province\nprovince_summary &lt;- table(cafc_clean$province)\nprovince_df &lt;- data.frame(\n  province = names(province_summary),\n  count = as.numeric(province_summary)\n)\n\n# Sort and filter out very small counts for readability\nprovince_df &lt;- province_df[order(province_df$count, decreasing = TRUE), ]\nprovince_df &lt;- province_df[province_df$count &gt; 1000, ]  # Only provinces with &gt;1000 cases\n\nprovince_plot &lt;- ggplot(province_df, aes(x = reorder(province, count), y = count)) +\n  geom_col(fill = \"darkgreen\", alpha = 0.7) +\n  coord_flip(clip=\"off\") +\n  labs(\n    title = \"Fraud Reports by Province/Territory\",\n    subtitle = \"Provinces with &gt;1,000 reported cases\",\n    x = \"Province/Territory\",\n    y = \"Number of Reports\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 9, face = \"bold\"),\n    axis.text.y = element_text(size = 9, hjust=1)\n    #plot.margin= margin(t = 10, r = 50, b = 10, l = 10)\n  ) +\n  geom_text(aes(label = scales::comma(count)), hjust = -0.1, size = 1.8)\n\nprint(province_plot)"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#fraud-reports-by-age-group",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#fraud-reports-by-age-group",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Fraud Reports by Age Group",
    "text": "Fraud Reports by Age Group\n\n\nShow the code\n# Create visualization 5: Fraud by Age Groups\nage_summary &lt;- table(cafc_clean$age_range)\nage_df &lt;- data.frame(\n  age_group = names(age_summary),\n  count = as.numeric(age_summary)\n)\n\n# Clean up age group names and filter meaningful groups\nage_df &lt;- age_df[age_df$count &gt; 500, ]  # Filter small groups\nage_df &lt;- age_df[!grepl(\"Not Available|non disponible\", age_df$age_group), ]  # Remove NA groups\n\nage_plot &lt;- ggplot(age_df, aes(x = reorder(age_group, count), y = count)) +\n  geom_col(fill = \"purple\", alpha = 0.7) +\n  coord_flip(clip=\"off\") +\n  labs(\n    title = \"Fraud Reports by Age Group\",\n    subtitle = \"Age groups with &gt;500 reported cases\",\n    x = \"Age Range\",\n    y = \"Number of Reports\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.y = element_text(size = 10)\n  ) +\n  geom_text(aes(label = scales::comma(count)), hjust = -0.1, size = 2)\n\nprint(age_plot)"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#fraud-victims-by-gender",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#fraud-victims-by-gender",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Fraud Victims by Gender",
    "text": "Fraud Victims by Gender\n\n\nShow the code\n# Create visualization 6: Gender distribution of fraud victims\ngender_summary &lt;- table(cafc_clean$gender)\ngender_df &lt;- data.frame(\n  gender = names(gender_summary),\n  count = as.numeric(gender_summary)\n)\n\n# Filter out \"Not Available\" and very small counts\ngender_df &lt;- gender_df[!grepl(\"Not Available\", gender_df$gender), ]\ngender_df &lt;- gender_df[gender_df$count &gt; 1000, ]"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#average-financial-loss-by-fraud-method",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#average-financial-loss-by-fraud-method",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Average Financial Loss by Fraud Method",
    "text": "Average Financial Loss by Fraud Method\n\n\nShow the code\n# Create visualization 7: Average fraud loss by solicitation method\n# First, let's examine the solicitation methods and calculate average losses\nmethod_loss &lt;- aggregate(dollar_loss ~ sol_method, data = cafc_clean, \n                        FUN = function(x) c(mean = mean(x, na.rm = TRUE), \n                                          count = length(x[!is.na(x)])))\n\n# Convert to proper data frame\nmethod_df &lt;- data.frame(\n  method = method_loss$sol_method,\n  avg_loss = method_loss$dollar_loss[,\"mean\"],\n  count = method_loss$dollar_loss[,\"count\"]\n)\n\n# Filter methods with reasonable sample sizes and remove extreme outliers\nmethod_df &lt;- method_df[method_df$count &gt;= 100 & method_df$avg_loss &lt; 50000, ]\nmethod_df &lt;- method_df[order(method_df$avg_loss, decreasing = TRUE), ]\n\nmethod_plot &lt;- ggplot(method_df, aes(x = reorder(method, avg_loss), y = avg_loss)) +\n  geom_col(aes(fill = count), alpha = 0.8) +\n  coord_flip(clip=\"off\") +\n  labs(\n    title = \"Average Financial Loss by Fraud Method\",\n    subtitle = \"Methods with ≥100 cases, excluding extreme outliers\",\n    x = \"Solicitation Method\",\n    y = \"Average Loss (CAD)\",\n    fill = \"Number of Cases\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.y = element_text(size = 9)\n  ) +\n  scale_fill_gradient(low = \"lightblue\", high = \"darkblue\") +\n  scale_y_continuous(labels = scales::dollar_format(prefix = \"$\")) +\n  geom_text(aes(label = scales::dollar(round(avg_loss))), hjust = -0.1, size = 2.8)\n\nprint(method_plot)"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#fraud_province_table",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#fraud_province_table",
    "title": "Per Capita: Quebec Teens most Targeted by Fraud",
    "section": "fraud_province_table",
    "text": "fraud_province_table\n\n\nShow the code\n# Create a cross-tabulation of fraud types by province\nfraud_province_table &lt;- table(cafc_clean$province, cafc_clean$fraud_cat)\n\n# Convert to data frame for ggplot\nfraud_province_df &lt;- as.data.frame(fraud_province_table)\nnames(fraud_province_df) &lt;- c(\"Province\", \"Fraud_Type\", \"Count\")\n\n# Filter to focus on major provinces and fraud types (to make heatmap readable)\n# Get top 8 provinces by total fraud cases\ntop_provinces &lt;- names(sort(rowSums(fraud_province_table), decreasing = TRUE))[1:8]\n\n# Get top 10 fraud types by total cases\ntop_fraud_types &lt;- names(sort(colSums(fraud_province_table), decreasing = TRUE))[1:10]\n\n# Filter the data\nfraud_province_filtered &lt;- fraud_province_df[\n  fraud_province_df$Province %in% top_provinces & \n  fraud_province_df$Fraud_Type %in% top_fraud_types, ]\n\n# Check the structure\ncat(\"Filtered data dimensions:\", nrow(fraud_province_filtered), \"rows\\n\")\n\n\nFiltered data dimensions: 80 rows\n\n\nShow the code\ncat(\"Top provinces:\", paste(top_provinces, collapse = \", \"), \"\\n\")\n\n\nTop provinces: Ontario, Quebec, British Columbia, Alberta, Manitoba, Saskatchewan, Nova Scotia, New Brunswick \n\n\nShow the code\ncat(\"Top fraud types:\", paste(top_fraud_types[1:5], collapse = \", \"), \"...\\n\")\n\n\nTop fraud types: Identity Fraud, Personal Info, Extortion, Service, Phishing ..."
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#fraud-type-specialization-by-province",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#fraud-type-specialization-by-province",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Fraud Type Specialization by Province",
    "text": "Fraud Type Specialization by Province\n\n\nShow the code\n# Create the heatmap\nheatmap_plot &lt;- ggplot(fraud_province_filtered, aes(x = Fraud_Type, y = Province, fill = Count)) +\n  geom_tile(color = \"white\", linewidth = 0.5) +\n  scale_fill_gradient(low = \"white\", high = \"darkred\", name = \"Number\\nof Cases\") +\n  labs(\n    title = \"Fraud Type Specialization by Province\",\n    subtitle = \"Heatmap showing concentration of different fraud types across Canadian provinces\",\n    x = \"Fraud Type\",\n    y = \"Province\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1, size = 9),\n    axis.text.y = element_text(size = 10),\n    panel.grid = element_blank()\n  ) +\n  geom_text(aes(label = ifelse(Count &gt; 500, scales::comma(Count), \"\")), \n            size = 2.5, color = \"white\")\n\nprint(heatmap_plot)"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#regional-fraud-specializations",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#regional-fraud-specializations",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Regional Fraud Specializations",
    "text": "Regional Fraud Specializations\n\n\nShow the code\n# Create a normalized heatmap to show regional specializations\n# Calculate percentage within each province to identify specializations\nfraud_province_matrix &lt;- as.matrix(fraud_province_table)\n\n# Calculate row percentages (what percentage of each province's fraud is each type)\nprovince_percentages &lt;- prop.table(fraud_province_matrix, 1) * 100\n\n# Convert back to long format for ggplot\nprovince_pct_df &lt;- as.data.frame(as.table(province_percentages))\nnames(province_pct_df) &lt;- c(\"Province\", \"Fraud_Type\", \"Percentage\")\n\n# Filter to same top provinces and fraud types\nprovince_pct_filtered &lt;- province_pct_df[\n  province_pct_df$Province %in% top_provinces & \n  province_pct_df$Fraud_Type %in% top_fraud_types, ]\n\n# Create normalized heatmap\nnormalized_heatmap &lt;- ggplot(province_pct_filtered, aes(x = Fraud_Type, y = Province, fill = Percentage)) +\n  geom_tile(color = \"white\", size = 0.5) +\n  scale_fill_gradient(low = \"lightyellow\", high = \"darkblue\", name = \"Percentage\\nof Province\\nTotal\") +\n  labs(\n    title = \"Regional Fraud Specializations\",\n    subtitle = \"Percentage breakdown showing each province's fraud type distribution\",\n    x = \"Fraud Type\",\n    y = \"Province\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1, size = 9),\n    axis.text.y = element_text(size = 10),\n    panel.grid = element_blank()\n  ) +\n  geom_text(aes(label = ifelse(Percentage &gt; 5, paste0(round(Percentage, 1), \"%\"), \"\")), \n            size = 2.2, color = \"white\")\n\n\nWarning: Using `size` aesthetic for lines was deprecated in ggplot2 3.4.0.\nℹ Please use `linewidth` instead.\n\n\nShow the code\nprint(normalized_heatmap)"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#provincial-population-data",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#provincial-population-data",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Provincial Population Data",
    "text": "Provincial Population Data\n\n\nShow the code\n# Create provincial population data (approximate 2023 figures)\n# These are approximate populations in thousands for Canadian provinces/territories\nprovincial_population &lt;- data.frame(\n  province = c(\"Ontario\", \"Quebec\", \"British Columbia\", \"Alberta\", \"Manitoba\", \n               \"Saskatchewan\", \"Nova Scotia\", \"New Brunswick\", \"Newfoundland and Labrador\",\n               \"Prince Edward Island\", \"Northwest Territories\", \"Yukon\", \"Nunavut\"),\n  population = c(15608, 8751, 5519, 4756, 1431, 1204, 1066, 834, 533, \n                 173, 45, 43, 40)  # in thousands\n)\n\n# Get total fraud cases by province from our data\nprovince_totals &lt;- as.data.frame(table(cafc_clean$province))\nnames(province_totals) &lt;- c(\"province\", \"fraud_cases\")\n\n# Merge with population data\nprovince_analysis &lt;- merge(province_totals, provincial_population, by = \"province\", all.x = TRUE)\n\n# Calculate per capita rates (per 100,000 residents)\nprovince_analysis$fraud_rate_per_100k &lt;- (province_analysis$fraud_cases / \n                                         (province_analysis$population * 1000)) * 100000\n\n# Filter out territories and provinces with very small numbers for cleaner visualization\nprovince_analysis &lt;- province_analysis[!is.na(province_analysis$population), ]\nprovince_analysis &lt;- province_analysis[province_analysis$fraud_cases &gt; 500, ]\n\n# Show the data\n#cat(\"Per-Capita Fraud Analysis:\\n\")\nprovince_analysis[order(province_analysis$fraud_rate_per_100k, decreasing = TRUE), ]\n\n\n               province fraud_cases population fraud_rate_per_100k\n53               Quebec       71813       8751            820.6262\n23             Manitoba        9536       1431            666.3871\n48              Ontario      102210      15608            654.8565\n6      British Columbia       33958       5519            615.2926\n3               Alberta       28044       4756            589.6552\n33        New Brunswick        4668        834            559.7122\n44          Nova Scotia        5684       1066            533.2083\n51 Prince Edward Island         904        173            522.5434\n55         Saskatchewan        6219       1204            516.5282"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#fraud-rates-per-100000-residents-by-province",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#fraud-rates-per-100000-residents-by-province",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Fraud Rates per 100,000 Residents by Province",
    "text": "Fraud Rates per 100,000 Residents by Province\n\n\nShow the code\n# Create per-capita visualization\nper_capita_plot &lt;- ggplot(province_analysis, \n                         aes(x = reorder(province, fraud_rate_per_100k), \n                             y = fraud_rate_per_100k)) +\n  geom_col(aes(fill = fraud_rate_per_100k), alpha = 0.8) +\n  coord_flip(clip=\"off\") +\n  scale_fill_gradient(low = \"lightblue\", high = \"darkred\", \n                     name = \"Rate per\\n100,000\") +\n  labs(\n    title = \"Fraud Rates per 100,000 Residents by Province\",\n    subtitle = \"Per-capita analysis reveals different patterns than absolute numbers\",\n    x = \"Province\",\n    y = \"Fraud Cases per 100,000 Residents\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.y = element_text(size = 10),\n    legend.position = \"right\"\n  ) +\n  geom_text(aes(label = round(fraud_rate_per_100k, 1)), \n            hjust = -0.1, size = 3.5)\n\nprint(per_capita_plot)"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#absolute-vs.-per-capita-rates",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#absolute-vs.-per-capita-rates",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Absolute vs. Per-Capita Rates",
    "text": "Absolute vs. Per-Capita Rates\n\n\nShow the code\n# Create comparison visualization: Absolute vs Per-Capita\n# Prepare data for comparison plot\ncomparison_data &lt;- province_analysis[, c(\"province\", \"fraud_cases\", \"fraud_rate_per_100k\")]\n\n# Create absolute numbers plot\nabsolute_plot &lt;- ggplot(comparison_data, \n                       aes(x = reorder(province, fraud_cases), y = fraud_cases)) +\n  geom_col(fill = \"steelblue\", alpha = 0.7) +\n  coord_flip() +\n  labs(\n    title = \"Absolute Numbers\",\n    x = \"\",\n    y = \"Total Fraud Cases\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 12, face = \"bold\"),\n    axis.text.y = element_text(size = 9)\n  ) +\n  scale_y_continuous(labels = scales::comma)\n\n# Create per-capita plot  \npercapita_plot &lt;- ggplot(comparison_data, \n                        aes(x = reorder(province, fraud_rate_per_100k), \n                            y = fraud_rate_per_100k)) +\n  geom_col(fill = \"darkred\", alpha = 0.7) +\n  coord_flip() +\n  labs(\n    title = \"Per-Capita Rates\",\n    x = \"\",\n    y = \"Cases per 100,000 Residents\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 12, face = \"bold\"),\n    axis.text.y = element_text(size = 9)\n  )\n\n# Display both plots\nprint(absolute_plot)\n\n\n\n\n\n\n\n\n\nShow the code\nprint(\"\\n--- Comparison: Absolute vs Per-Capita ---\\n\")\n\n\n[1] \"\\n--- Comparison: Absolute vs Per-Capita ---\\n\"\n\n\nShow the code\nprint(percapita_plot)"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#quebec-fraud-report",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#quebec-fraud-report",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Quebec Fraud Report",
    "text": "Quebec Fraud Report\n\n\nShow the code\n# Analyze Quebec's fraud type distribution\nquebec_data &lt;- cafc_clean[cafc_clean$province == \"Quebec\", ]\n\n# Get fraud type counts for Quebec\nquebec_fraud_counts &lt;- table(quebec_data$fraud_cat)\nquebec_fraud_df &lt;- data.frame(\n  fraud_type = names(quebec_fraud_counts),\n  quebec_count = as.numeric(quebec_fraud_counts)\n)\n\n# Calculate Quebec's fraud rate per 100k for each type\nquebec_population &lt;- 8751 * 1000  # Quebec population\nquebec_fraud_df$quebec_rate_per_100k &lt;- (quebec_fraud_df$quebec_count / quebec_population) * 100000\n\n# Get national averages for comparison\nnational_fraud_counts &lt;- table(cafc_clean$fraud_cat)\ntotal_population &lt;- sum(provincial_population$population * 1000, na.rm = TRUE)\nnational_fraud_df &lt;- data.frame(\n  fraud_type = names(national_fraud_counts),\n  national_count = as.numeric(national_fraud_counts),\n  national_rate_per_100k = (as.numeric(national_fraud_counts) / total_population) * 100000\n)\n\n# Merge Quebec and national data\nquebec_comparison &lt;- merge(quebec_fraud_df, national_fraud_df, by = \"fraud_type\")\nquebec_comparison$rate_ratio &lt;- quebec_comparison$quebec_rate_per_100k / quebec_comparison$national_rate_per_100k\n\n# Show top contributors to Quebec's high rate\ncat(\"Quebec's Top 10 Fraud Types (by per-capita rate):\\n\")\n\n\nQuebec's Top 10 Fraud Types (by per-capita rate):\n\n\nShow the code\ntop_quebec_fraud &lt;- quebec_comparison[order(quebec_comparison$quebec_rate_per_100k, decreasing = TRUE), ][1:10, ]\nprint(top_quebec_fraud[, c(\"fraud_type\", \"quebec_count\", \"quebec_rate_per_100k\", \"rate_ratio\")])\n\n\n          fraud_type quebec_count quebec_rate_per_100k rate_ratio\n14    Identity Fraud        28199            322.23746  1.7913127\n22     Personal Info         8827            100.86847  1.6074582\n8          Extortion         6074             69.40921  1.2112623\n23          Phishing         4604             52.61113  1.0075174\n1  Bank Investigator         3055             34.91030  1.1352870\n16       Investments         2771             31.66495  0.8209288\n19       Merchandise         2663             30.43081  0.8481909\n29           Service         2493             28.48817  0.5151722\n38      Vendor Fraud         1847             21.10616  1.0450671\n36           Unknown         1685             19.25494  1.1294068"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#quebecs-fraud-type-specialization",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#quebecs-fraud-type-specialization",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Quebec’s Fraud Type Specialization",
    "text": "Quebec’s Fraud Type Specialization\n\n\nShow the code\n# Create visualization showing Quebec's fraud specialization\n# Filter for significant fraud types\nquebec_major &lt;- top_quebec_fraud[top_quebec_fraud$quebec_count &gt; 1000, ]\n\nquebec_specialization_plot &lt;- ggplot(quebec_major, \n                                    aes(x = reorder(fraud_type, rate_ratio), \n                                        y = rate_ratio)) +\n  geom_col(aes(fill = ifelse(rate_ratio &gt; 1, \"Above National\", \"Below National\")), \n           alpha = 0.8) +\n  geom_hline(yintercept = 1, linetype = \"dashed\", color = \"black\", size = 1) +\n  coord_flip(clip=\"off\") +\n  scale_fill_manual(values = c(\"Above National\" = \"darkred\", \"Below National\" = \"steelblue\"),\n                   name = \"Compared to\\nNational Average\") +\n  labs(\n    title = \"Quebec's Fraud Type Specialization\",\n    subtitle = \"Ratio of Quebec's per-capita rate to national average (&gt;1000 cases)\",\n    x = \"Fraud Type\",\n    y = \"Rate Ratio (Quebec/National Average)\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.y = element_text(size = 10)\n  ) +\n  geom_text(aes(label = paste0(round(rate_ratio, 2), \"x\")), \n            hjust = ifelse(quebec_major$rate_ratio &gt; 1, -0.1, 1.1), size = 3)\n\nprint(quebec_specialization_plot)"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#quebecs-contribution-to-national-fraud-totals",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#quebecs-contribution-to-national-fraud-totals",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Quebec’s Contribution to National Fraud Totals",
    "text": "Quebec’s Contribution to National Fraud Totals\n\n\nShow the code\n# Create a detailed breakdown showing Quebec's contribution to national totals\nquebec_contribution &lt;- data.frame(\n  fraud_type = top_quebec_fraud$fraud_type[1:8],\n  quebec_count = top_quebec_fraud$quebec_count[1:8],\n  quebec_rate = round(top_quebec_fraud$quebec_rate_per_100k[1:8], 1),\n  national_count = top_quebec_fraud$national_count[1:8],\n  quebec_percentage = round((top_quebec_fraud$quebec_count[1:8] / top_quebec_fraud$national_count[1:8]) * 100, 1)\n)\n\n# Create stacked bar chart showing Quebec's contribution\ncontribution_plot &lt;- ggplot(quebec_contribution, \n                           aes(x = reorder(fraud_type, quebec_count))) +\n  geom_col(aes(y = national_count), fill = \"lightgray\", alpha = 0.7, width = 0.7) +\n  geom_col(aes(y = quebec_count), fill = \"darkblue\", alpha = 0.8, width = 0.7) +\n  coord_flip(clip=\"off\") +\n  labs(\n    title = \"Quebec's Contribution to National Fraud Totals\",\n    subtitle = \"Dark blue: Quebec cases, Light gray: All other provinces combined\",\n    x = \"Fraud Type\",\n    y = \"Number of Cases\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.y = element_text(size = 10)\n  ) +\n  scale_y_continuous(labels = scales::comma) +\n  geom_text(aes(y = national_count, \n                label = paste0(quebec_percentage, \"% QC\")), \n            hjust = -0.1, size = 1.70)\n\nprint(contribution_plot)\n\n\n\n\n\n\n\n\n\nShow the code\n# Print summary table\ncat(\"\\nQuebec's Fraud Analysis Summary:\\n\")\n\n\n\nQuebec's Fraud Analysis Summary:\n\n\nShow the code\nprint(quebec_contribution)\n\n\n         fraud_type quebec_count quebec_rate national_count quebec_percentage\n1    Identity Fraud        28199       322.2          71961              39.2\n2     Personal Info         8827       100.9          25102              35.2\n3         Extortion         6074        69.4          22923              26.5\n4          Phishing         4604        52.6          20889              22.0\n5 Bank Investigator         3055        34.9          12301              24.8\n6       Investments         2771        31.7          15430              18.0\n7       Merchandise         2663        30.4          14352              18.6\n8           Service         2493        28.5          22121              11.3\n\n\n\n\nShow the code\n# Analyze Quebec's demographic patterns\n# Age distribution of Quebec fraud victims\nquebec_age_summary &lt;- table(quebec_data$age_range)\nquebec_age_df &lt;- data.frame(\n  age_group = names(quebec_age_summary),\n  quebec_count = as.numeric(quebec_age_summary)\n)\n\n# Get national age distribution for comparison\nnational_age_summary &lt;- table(cafc_clean$age_range)\nnational_age_df &lt;- data.frame(\n  age_group = names(national_age_summary),\n  national_count = as.numeric(national_age_summary)\n)\n\n# Calculate Quebec's share of each age group\nquebec_age_comparison &lt;- merge(quebec_age_df, national_age_df, by = \"age_group\")\nquebec_age_comparison$quebec_percentage &lt;- (quebec_age_comparison$quebec_count / \n                                           quebec_age_comparison$national_count) * 100\nquebec_age_comparison$quebec_rate_per_100k &lt;- (quebec_age_comparison$quebec_count / quebec_population) * 100000\n\n# Filter meaningful age groups and remove \"Not Available\"\nquebec_age_clean &lt;- quebec_age_comparison[\n  !grepl(\"Not Available|non disponible\", quebec_age_comparison$age_group) &\n  quebec_age_comparison$quebec_count &gt; 500, ]\n\ncat(\"Quebec Age Demographics (Top vulnerable groups):\\n\")\n\n\nQuebec Age Demographics (Top vulnerable groups):\n\n\nShow the code\nquebec_age_clean[order(quebec_age_clean$quebec_rate_per_100k, decreasing = TRUE), ]\n\n\n   age_group quebec_count national_count quebec_percentage quebec_rate_per_100k\n5   '30 - 39        12430          45123          27.54693            142.04091\n6   '40 - 49        11657          39567          29.46142            133.20763\n8   '60 - 69         9694          40003          24.23318            110.77591\n4   '20 - 29         9546          36451          26.18858            109.08468\n7   '50 - 59         9285          36431          25.48654            106.10216\n2   '10 - 19         6764          10483          64.52351             77.29402\n9   '70 - 79         5975          25022          23.87899             68.27791\n10  '80 - 89         1442           7879          18.30181             16.47812"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#quebec-fraud-victims-by-age-group",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#quebec-fraud-victims-by-age-group",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Quebec Fraud Victims by Age Group",
    "text": "Quebec Fraud Victims by Age Group\n\n\nShow the code\n# Create Quebec age demographics visualization\nquebec_age_plot &lt;- ggplot(quebec_age_clean, \n                         aes(x = reorder(age_group, quebec_rate_per_100k), \n                             y = quebec_rate_per_100k)) +\n  geom_col(aes(fill = quebec_percentage), alpha = 0.8) +\n  coord_flip(clip=\"off\") +\n  scale_fill_gradient(low = \"lightblue\", high = \"darkred\", \n                     name = \"% of National\\nTotal\") +\n  labs(\n    title = \"Quebec Fraud Victims by Age Group\",\n    subtitle = \"Per-capita rates with Quebec's share of national totals\",\n    x = \"Age Group\",\n    y = \"Quebec Fraud Rate per 100,000\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.y = element_text(size = 10)\n  ) +\n  geom_text(aes(label = paste0(round(quebec_rate_per_100k, 1), \"\\n(\", \n                              round(quebec_percentage, 1), \"%)\")), \n            hjust = -0.1, size = 3)\n\nprint(quebec_age_plot)"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#gender-patterns-in-quebec-report",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#gender-patterns-in-quebec-report",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "gender patterns in Quebec Report",
    "text": "gender patterns in Quebec Report\n\n\nShow the code\n# Analyze gender patterns in Quebec\nquebec_gender_summary &lt;- table(quebec_data$gender)\nquebec_gender_df &lt;- data.frame(\n  gender = names(quebec_gender_summary),\n  quebec_count = as.numeric(quebec_gender_summary)\n)\n\ncat(\"\\nQuebec Gender Distribution:\\n\")\n\n\n\nQuebec Gender Distribution:\n\n\nShow the code\nquebec_gender_df[quebec_gender_df$quebec_count &gt; 1000, ]\n\n\n         gender quebec_count\n1        Female        32681\n2          Male        33696\n3 Not Available         5236"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#quebec-age-specific-fraud-vulnerabilities",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#quebec-age-specific-fraud-vulnerabilities",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Quebec: Age-Specific Fraud Vulnerabilities",
    "text": "Quebec: Age-Specific Fraud Vulnerabilities\n\n\nShow the code\n# Analyze fraud types by age group in Quebec to identify age-specific vulnerabilities\nquebec_age_fraud &lt;- table(quebec_data$age_range, quebec_data$fraud_cat)\n\n# Convert to percentage within each age group\nquebec_age_fraud_pct &lt;- prop.table(quebec_age_fraud, 1) * 100\n\n# Focus on major age groups and fraud types\nmajor_ages &lt;- c(\"'20 - 29\", \"'30 - 39\", \"'40 - 49\", \"'50 - 59\", \"'60 - 69\", \"'70 - 79\")\nmajor_fraud_types &lt;- c(\"Identity Fraud\", \"Personal Info\", \"Extortion\", \"Phishing\", \"Bank Investigator\")\n\n# Create subset for visualization\nquebec_age_fraud_subset &lt;- quebec_age_fraud_pct[major_ages, major_fraud_types]\n\n# Convert to long format for ggplot\nquebec_age_fraud_long &lt;- as.data.frame(as.table(quebec_age_fraud_subset))\nnames(quebec_age_fraud_long) &lt;- c(\"Age_Group\", \"Fraud_Type\", \"Percentage\")\n\n# Create age-specific fraud pattern heatmap\nage_fraud_heatmap &lt;- ggplot(quebec_age_fraud_long, \n                           aes(x = Fraud_Type, y = Age_Group, fill = Percentage)) +\n  geom_tile(color = \"white\", size = 0.5) +\n  scale_fill_gradient(low = \"white\", high = \"purple\", name = \"% within\\nAge Group\") +\n  labs(\n    title = \"Quebec: Age-Specific Fraud Vulnerabilities\",\n    subtitle = \"Percentage of each age group affected by different fraud types\",\n    x = \"Fraud Type\",\n    y = \"Age Group\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1, size = 9),\n    axis.text.y = element_text(size = 10),\n    panel.grid = element_blank()\n  ) +\n  geom_text(aes(label = ifelse(Percentage &gt; 5, paste0(round(Percentage, 1), \"%\"), \"\")), \n            size = 2.5, color = \"white\")\n\nprint(age_fraud_heatmap)"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#quebec-teenagers-fraud-analysis-report",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#quebec-teenagers-fraud-analysis-report",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Quebec Teenagers Fraud Analysis Report",
    "text": "Quebec Teenagers Fraud Analysis Report\n\n\nShow the code\n# Analyze fraud methods targeting Quebec teenagers\nquebec_teens &lt;- quebec_data[quebec_data$age_range == \"'10 - 19\", ]\n\ncat(\"Quebec Teenagers Fraud Analysis:\\n\")\n\n\nQuebec Teenagers Fraud Analysis:\n\n\nShow the code\ncat(\"Total Quebec teen victims:\", nrow(quebec_teens), \"\\n\")\n\n\nTotal Quebec teen victims: 6764 \n\n\nShow the code\ncat(\"Percentage of all Quebec fraud victims:\", round((nrow(quebec_teens) / nrow(quebec_data)) * 100, 2), \"%\\n\\n\")\n\n\nPercentage of all Quebec fraud victims: 9.42 %\n\n\nShow the code\n# Analyze solicitation methods used against Quebec teens\nteen_methods &lt;- table(quebec_teens$sol_method)\nteen_methods_df &lt;- data.frame(\n  method = names(teen_methods),\n  count = as.numeric(teen_methods),\n  percentage = round((as.numeric(teen_methods) / sum(teen_methods)) * 100, 1)\n)\n\n# Filter meaningful methods\nteen_methods_clean &lt;- teen_methods_df[teen_methods_df$count &gt; 50, ]\nteen_methods_clean &lt;- teen_methods_clean[order(teen_methods_clean$count, decreasing = TRUE), ]\n\ncat(\"Top Solicitation Methods Targeting Quebec Teenagers:\\n\")\n\n\nTop Solicitation Methods Targeting Quebec Teenagers:\n\n\nShow the code\nprint(teen_methods_clean)\n\n\n                   method count percentage\n8           Other/unknown  5930       87.7\n7           Not Available   190        2.8\n5 Internet-social network   178        2.6\n1             Direct call   122        1.8\n4                Internet   120        1.8\n9            Text message    81        1.2\n2  Door to door/in person    67        1.0\n3                   Email    57        0.8"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#fraud-types-targeting-quebec-teenagers-report",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#fraud-types-targeting-quebec-teenagers-report",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Fraud types targeting Quebec teenagers Report",
    "text": "Fraud types targeting Quebec teenagers Report\n\n\nShow the code\n# Analyze fraud types targeting Quebec teenagers\nteen_fraud_types &lt;- table(quebec_teens$fraud_cat)\nteen_fraud_df &lt;- data.frame(\n  fraud_type = names(teen_fraud_types),\n  count = as.numeric(teen_fraud_types),\n  percentage = round((as.numeric(teen_fraud_types) / sum(teen_fraud_types)) * 100, 1)\n)\n\nteen_fraud_clean &lt;- teen_fraud_df[teen_fraud_df$count &gt; 50, ]\nteen_fraud_clean &lt;- teen_fraud_clean[order(teen_fraud_clean$count, decreasing = TRUE), ]\n\ncat(\"Top Fraud Types Targeting Quebec Teenagers:\\n\")\n\n\nTop Fraud Types Targeting Quebec Teenagers:\n\n\nShow the code\nprint(teen_fraud_clean)\n\n\n       fraud_type count percentage\n7  Identity Fraud  5122       75.7\n14  Personal Info  1054       15.6\n23   Vendor Fraud   117        1.7\n6       Extortion   104        1.5\n12    Merchandise    73        1.1\n15       Phishing    67        1.0\n\n\nShow the code\n# Compare Quebec teens to national teen patterns\nnational_teens &lt;- cafc_clean[cafc_clean$age_range == \"'10 - 19\", ]\nnational_teen_methods &lt;- table(national_teens$sol_method)\n\n# Calculate Quebec's share of each method\nquebec_teen_comparison &lt;- data.frame(\n  method = names(teen_methods),\n  quebec_count = as.numeric(teen_methods),\n  national_count = as.numeric(national_teen_methods[names(teen_methods)]),\n  quebec_share = round((as.numeric(teen_methods) / as.numeric(national_teen_methods[names(teen_methods)])) * 100, 1)\n)\n\nquebec_teen_comparison &lt;- quebec_teen_comparison[!is.na(quebec_teen_comparison$national_count), ]\nquebec_teen_comparison &lt;- quebec_teen_comparison[quebec_teen_comparison$quebec_count &gt; 50, ]\n\ncat(\"\\nQuebec's Share of National Teen Fraud by Method:\\n\")\n\n\n\nQuebec's Share of National Teen Fraud by Method:\n\n\nShow the code\nquebec_teen_comparison[order(quebec_teen_comparison$quebec_share, decreasing = TRUE), ]\n\n\n                   method quebec_count national_count quebec_share\n8           Other/unknown         5930           6776         87.5\n7           Not Available          190            279         68.1\n2  Door to door/in person           67            112         59.8\n4                Internet          120            508         23.6\n1             Direct call          122            769         15.9\n3                   Email           57            359         15.9\n5 Internet-social network          178           1119         15.9\n9            Text message           81            524         15.5"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#most-common-fraud-types-targeting-10-19-year-olds",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#most-common-fraud-types-targeting-10-19-year-olds",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Most common fraud types targeting 10-19 year olds",
    "text": "Most common fraud types targeting 10-19 year olds\n\n\nShow the code\n# Create visualizations for teen fraud patterns\n# Clean up method data for better visualization\nteen_methods_viz &lt;- teen_methods_clean[!teen_methods_clean$method %in% c(\"Other/unknown\", \"Not Available\"), ]\n\nteen_methods_plot &lt;- ggplot(teen_methods_viz, \n                           aes(x = reorder(method, count), y = count)) +\n  geom_col(fill = \"red\", alpha = 0.7) +\n  coord_flip(clip=\"off\") +\n  labs(\n    title = \"Quebec Teen Fraud: Top Solicitation Methods\",\n    subtitle = \"Methods used to target 10-19 year olds (excluding Unknown/Not Available)\",\n    x = \"Solicitation Method\",\n    y = \"Number of Teen Victims\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.y = element_text(size = 10),\n    plot.margin = margin(t = 10, r = 60, b = 10, l = 10)\n  ) +\n  geom_text(aes(label = paste0(count, \" (\", percentage, \"%)\")), \n            hjust = -0.1, size = 2.0)\n\nprint(teen_methods_plot)\n\n\n\n\n\n\n\n\n\nShow the code\n# Create fraud type visualization\nteen_fraud_plot &lt;- ggplot(teen_fraud_clean, \n                         aes(x = reorder(fraud_type, count), y = count)) +\n  geom_col(fill = \"darkblue\", alpha = 0.8) +\n  coord_flip(clip=\"off\") +\n  labs(\n    title = \"Quebec Teen Fraud: Types of Fraud\",\n    subtitle = \"Most common fraud types targeting 10-19 year olds\",\n    x = \"Fraud Type\",\n    y = \"Number of Teen Victims\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.y = element_text(size = 10),\n    plot.margin = margin(t = 10, r = 50, b = 10, l = 10)\n  ) +\n  geom_text(aes(label = paste0(count, \" (\", percentage, \"%)\")), \n            hjust = -0.1, size = 2.0)\n\nprint(teen_fraud_plot)"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#dollar-losses-for-quebec-teens-vs-other-demographics-report",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#dollar-losses-for-quebec-teens-vs-other-demographics-report",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Dollar Losses for Quebec teens vs other demographics Report",
    "text": "Dollar Losses for Quebec teens vs other demographics Report\n\n\nShow the code\n# Analyze dollar losses for Quebec teens vs other demographics\n# First, let's examine the financial impact on Quebec teens\nquebec_teens_losses &lt;- quebec_teens[!is.na(quebec_teens$dollar_loss) & quebec_teens$dollar_loss &gt; 0, ]\n\ncat(\"Quebec Teen Financial Impact Analysis:\\n\")\n\n\nQuebec Teen Financial Impact Analysis:\n\n\nShow the code\ncat(\"Total teen victims with recorded losses:\", nrow(quebec_teens_losses), \"\\n\")\n\n\nTotal teen victims with recorded losses: 269 \n\n\nShow the code\ncat(\"Average loss per Quebec teen victim: $\", round(mean(quebec_teens_losses$dollar_loss), 2), \"\\n\")\n\n\nAverage loss per Quebec teen victim: $ 3455.92 \n\n\nShow the code\ncat(\"Median loss per Quebec teen victim: $\", round(median(quebec_teens_losses$dollar_loss), 2), \"\\n\")\n\n\nMedian loss per Quebec teen victim: $ 600 \n\n\nShow the code\ncat(\"Total losses to Quebec teens: $\", scales::comma(sum(quebec_teens_losses$dollar_loss)), \"\\n\\n\")\n\n\nTotal losses to Quebec teens: $ 929,643 \n\n\nShow the code\n# Compare to other Quebec age groups\nquebec_age_financial &lt;- aggregate(dollar_loss ~ age_range, \n                                 data = quebec_data[quebec_data$dollar_loss &gt; 0 & !is.na(quebec_data$dollar_loss), ], \n                                 FUN = function(x) c(mean = mean(x), median = median(x), total = sum(x), count = length(x)))\n\n# Convert to proper data frame\nquebec_age_losses &lt;- data.frame(\n  age_group = quebec_age_financial$age_range,\n  avg_loss = quebec_age_financial$dollar_loss[,\"mean\"],\n  median_loss = quebec_age_financial$dollar_loss[,\"median\"],\n  total_loss = quebec_age_financial$dollar_loss[,\"total\"],\n  victim_count = quebec_age_financial$dollar_loss[,\"count\"]\n)\n\n# Filter meaningful age groups and sort by average loss\nquebec_age_losses_clean &lt;- quebec_age_losses[!grepl(\"Not Available|non disponible\", quebec_age_losses$age_group) & \n                                           quebec_age_losses$victim_count &gt; 100, ]\nquebec_age_losses_clean &lt;- quebec_age_losses_clean[order(quebec_age_losses_clean$avg_loss, decreasing = TRUE), ]\n\ncat(\"Quebec Average Losses by Age Group:\\n\")\n\n\nQuebec Average Losses by Age Group:\n\n\nShow the code\nprint(quebec_age_losses_clean[, c(\"age_group\", \"avg_loss\", \"median_loss\", \"victim_count\")])\n\n\n   age_group  avg_loss median_loss victim_count\n7   '50 - 59 29675.747    1988.000         1453\n8   '60 - 69 28629.957    2500.000         1608\n10  '80 - 89 27979.096    4200.000          250\n9   '70 - 79 23678.531    2981.580         1052\n6   '40 - 49 20276.760    1500.000         1696\n5   '30 - 39 12043.135    1172.955         1580\n4   '20 - 29  5898.617     910.000         1335\n2   '10 - 19  3455.920     600.000          269"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#average-financial-loss-per-victim-by-age-group-quebec",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#average-financial-loss-per-victim-by-age-group-quebec",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Average Financial Loss per Victim by Age Group (Quebec)",
    "text": "Average Financial Loss per Victim by Age Group (Quebec)\n\n\nShow the code\n# Create visualization comparing average losses by age group\nquebec_losses_plot &lt;- ggplot(quebec_age_losses_clean, \n                            aes(x = reorder(age_group, avg_loss), y = avg_loss)) +\n  geom_col(aes(fill = ifelse(age_group == \"'10 - 19\", \"Teens\", \"Other Ages\")), alpha = 0.8) +\n  coord_flip(clip=\"off\") +\n  scale_fill_manual(values = c(\"Teens\" = \"red\", \"Other Ages\" = \"steelblue\"),\n                   name = \"Age Category\") +\n  labs(\n    title = \"Average Financial Loss per Victim by Age Group (Quebec)\",\n    subtitle = \"Teens have the lowest average losses but significant total impact\",\n    x = \"Age Group\",\n    y = \"Average Loss per Victim (CAD)\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.y = element_text(size = 10)\n  ) +\n  scale_y_continuous(labels = scales::dollar_format(prefix = \"$\")) +\n  geom_text(aes(label = scales::dollar(round(avg_loss))), \n            hjust = -0.1, size = 3.2)\n\nprint(quebec_losses_plot)\n\n\n\n\n\n\n\n\n\nShow the code\n# Compare Quebec teen losses to national teen patterns\nnational_teens_losses &lt;- national_teens[!is.na(national_teens$dollar_loss) & \n                                       national_teens$dollar_loss &gt; 0, ]\n\ncat(\"\\nComparison: Quebec vs National Teen Losses:\\n\")\n\n\n\nComparison: Quebec vs National Teen Losses:\n\n\nShow the code\ncat(\"Quebec teen average loss: $\", round(mean(quebec_teens_losses$dollar_loss), 2), \"\\n\")\n\n\nQuebec teen average loss: $ 3455.92 \n\n\nShow the code\ncat(\"National teen average loss: $\", round(mean(national_teens_losses$dollar_loss), 2), \"\\n\")\n\n\nNational teen average loss: $ 5024.12 \n\n\nShow the code\ncat(\"Quebec teen median loss: $\", round(median(quebec_teens_losses$dollar_loss), 2), \"\\n\")\n\n\nQuebec teen median loss: $ 600 \n\n\nShow the code\ncat(\"National teen median loss: $\", round(median(national_teens_losses$dollar_loss), 2), \"\\n\")\n\n\nNational teen median loss: $ 760"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#quebec-teen-fraud-loss-distribution",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#quebec-teen-fraud-loss-distribution",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Quebec Teen Fraud Loss Distribution",
    "text": "Quebec Teen Fraud Loss Distribution\n\n\nShow the code\n# Analyze loss distribution patterns for Quebec teens\n# Create loss brackets to understand the distribution\nquebec_teens_losses$loss_bracket &lt;- cut(quebec_teens_losses$dollar_loss,\n                                       breaks = c(0, 100, 500, 1000, 5000, 10000, Inf),\n                                       labels = c(\"$1-100\", \"$101-500\", \"$501-1000\", \n                                                \"$1001-5000\", \"$5001-10000\", \"&gt;$10000\"),\n                                       right = TRUE)\n\nteen_loss_distribution &lt;- table(quebec_teens_losses$loss_bracket)\nteen_loss_df &lt;- data.frame(\n  loss_bracket = names(teen_loss_distribution),\n  count = as.numeric(teen_loss_distribution),\n  percentage = round((as.numeric(teen_loss_distribution) / sum(teen_loss_distribution)) * 100, 1)\n)\n\n# Create loss distribution visualization\nteen_loss_dist_plot &lt;- ggplot(teen_loss_df, \n                             aes(x = loss_bracket, y = count)) +\n  geom_col(fill = \"orange\", alpha = 0.8) +\n  labs(\n    title = \"Quebec Teen Fraud Loss Distribution\",\n    subtitle = \"Most teen losses are under $1,000 but some suffer major losses\",\n    x = \"Loss Amount Bracket\",\n    y = \"Number of Teen Victims\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1)\n  ) +\n  geom_text(aes(label = paste0(count, \"\\n(\", percentage, \"%)\")), \n            vjust = +0.5, size = 3)\n\nprint(teen_loss_dist_plot)\n\n\n\n\n\n\n\n\n\nShow the code\n# Show the distribution table\ncat(\"\\nQuebec Teen Loss Distribution:\\n\")\n\n\n\nQuebec Teen Loss Distribution:\n\n\nShow the code\nprint(teen_loss_df)\n\n\n  loss_bracket count percentage\n1       $1-100    20        7.4\n2     $101-500   108       40.1\n3    $501-1000    35       13.0\n4   $1001-5000    69       25.7\n5  $5001-10000    17        6.3\n6      &gt;$10000    20        7.4\n\n\nShow the code\n# Calculate some key statistics\ncat(\"\\nKey Teen Loss Statistics:\\n\")\n\n\n\nKey Teen Loss Statistics:\n\n\nShow the code\ncat(\"Teens losing &gt;$5,000:\", sum(teen_loss_df$count[teen_loss_df$loss_bracket %in% c(\"$5001-10000\", \"&gt;$10000\")]), \n    \"victims (\", round(sum(teen_loss_df$percentage[teen_loss_df$loss_bracket %in% c(\"$5001-10000\", \"&gt;$10000\")]), 1), \"%)\\n\")\n\n\nTeens losing &gt;$5,000: 37 victims ( 13.7 %)\n\n\nShow the code\ncat(\"Teens losing &lt;$500:\", sum(teen_loss_df$count[teen_loss_df$loss_bracket %in% c(\"$1-100\", \"$101-500\")]),\n    \"victims (\", round(sum(teen_loss_df$percentage[teen_loss_df$loss_bracket %in% c(\"$1-100\", \"$101-500\")]), 1), \"%)\\n\")\n\n\nTeens losing &lt;$500: 128 victims ( 47.5 %)\n\n\nQuebec Teen Fraud Trends Over Time Report\n\n\nShow the code\n# Analyze Quebec teen fraud trends over time\n# Convert date column to proper date format\nquebec_teens$date_clean &lt;- as.Date(quebec_teens$date)\n\n# Extract year and month for trend analysis\nquebec_teens$year &lt;- as.numeric(format(quebec_teens$date_clean, \"%Y\"))\nquebec_teens$month &lt;- as.numeric(format(quebec_teens$date_clean, \"%m\"))\nquebec_teens$year_month &lt;- format(quebec_teens$date_clean, \"%Y-%m\")\n\n# Analyze yearly trends\nyearly_teen_counts &lt;- table(quebec_teens$year)\nyearly_teen_df &lt;- data.frame(\n  year = as.numeric(names(yearly_teen_counts)),\n  teen_victims = as.numeric(yearly_teen_counts)\n)\n\ncat(\"Quebec Teen Fraud by Year:\\n\")\n\n\nQuebec Teen Fraud by Year:\n\n\nShow the code\nprint(yearly_teen_df)\n\n\n  year teen_victims\n1 2021         3415\n2 2022          943\n3 2023          988\n4 2024          744\n5 2025          674\n\n\nShow the code\n# Calculate year-over-year change\nyearly_teen_df$yoy_change &lt;- c(NA, diff(yearly_teen_df$teen_victims))\nyearly_teen_df$yoy_pct_change &lt;- round(c(NA, diff(yearly_teen_df$teen_victims) / yearly_teen_df$teen_victims[-nrow(yearly_teen_df)] * 100), 1)\n\ncat(\"\\nYear-over-Year Changes:\\n\")\n\n\n\nYear-over-Year Changes:\n\n\nShow the code\nprint(yearly_teen_df)\n\n\n  year teen_victims yoy_change yoy_pct_change\n1 2021         3415         NA             NA\n2 2022          943      -2472          -72.4\n3 2023          988         45            4.8\n4 2024          744       -244          -24.7\n5 2025          674        -70           -9.4"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#quebec-teen-fraud-victims-over-time",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#quebec-teen-fraud-victims-over-time",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Quebec Teen Fraud Victims Over Time",
    "text": "Quebec Teen Fraud Victims Over Time\n\n\nShow the code\n# Create yearly trend visualization\nyearly_teen_plot &lt;- ggplot(yearly_teen_df, aes(x = year, y = teen_victims)) +\n  geom_line(color = \"red\", size = 1.5) +\n  geom_point(color = \"darkred\", size = 4) +\n  labs(\n    title = \"Quebec Teen Fraud Victims Over Time\",\n    subtitle = \"Dramatic decline after 2021 peak\",\n    x = \"Year\",\n    y = \"Number of Teen Victims (10-19 years)\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.x = element_text(size = 10)\n  ) +\n  scale_x_continuous(breaks = yearly_teen_df$year) +\n  scale_y_continuous(labels = scales::comma) +\n  geom_text(aes(label = paste0(teen_victims, \"\\n(\", \n                              ifelse(is.na(yoy_pct_change), \"\", \n                                    paste0(ifelse(yoy_pct_change &gt; 0, \"+\", \"\"), \n                                          yoy_pct_change, \"%\")),\")\")), \n            vjust = -1.5, size = 3.5)\n\nprint(yearly_teen_plot)\n\n\n\n\n\n\n\n\n\nShow the code\n# Analyze monthly patterns within years to identify seasonality\nquebec_teens$month_name &lt;- month.name[quebec_teens$month]\nmonthly_teen_counts &lt;- aggregate(quebec_teens$year, by = list(quebec_teens$year, quebec_teens$month), FUN = length)\nnames(monthly_teen_counts) &lt;- c(\"year\", \"month\", \"teen_count\")\n\ncat(\"\\nMonthly patterns summary (showing months with &gt;50 cases in any year):\\n\")\n\n\n\nMonthly patterns summary (showing months with &gt;50 cases in any year):\n\n\nShow the code\nmonthly_summary &lt;- aggregate(teen_count ~ month, data = monthly_teen_counts, FUN = function(x) c(avg = mean(x), total = sum(x)))\nmonthly_df &lt;- data.frame(\n  month = monthly_summary$month,\n  avg_monthly = round(monthly_summary$teen_count[,\"avg\"], 1),\n  total_monthly = monthly_summary$teen_count[,\"total\"]\n)\nmonthly_df$month_name &lt;- month.name[monthly_df$month]\nmonthly_df[monthly_df$total_monthly &gt; 200, ]\n\n\n   month avg_monthly total_monthly month_name\n1      1       156.4           782    January\n2      2       137.0           685   February\n3      3       158.4           792      March\n4      4       137.4           687      April\n5      5       139.6           698        May\n6      6        97.8           489       June\n7      7       117.0           585       July\n8      8       146.4           732     August\n9      9        85.4           427  September\n10    10        76.2           305    October\n11    11        76.5           306   November\n12    12        69.0           276   December"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#teen-victims-per-month",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#teen-victims-per-month",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Teen Victims per Month",
    "text": "Teen Victims per Month\n\n\nShow the code\n# Create a detailed monthly trend visualization\n# Filter to 2021-2024 for complete years (2025 is partial)\nmonthly_teen_complete &lt;- monthly_teen_counts[monthly_teen_counts$year &lt;= 2024, ]\nmonthly_teen_complete$date &lt;- as.Date(paste(monthly_teen_complete$year, monthly_teen_complete$month, \"01\", sep = \"-\"))\n\nmonthly_trend_plot &lt;- ggplot(monthly_teen_complete, aes(x = date, y = teen_count)) +\n  geom_line(color = \"blue\", size = 1) +\n  geom_point(color = \"darkblue\", size = 2) +\n  labs(\n    title = \"Quebec Teen Fraud: Monthly Trends (2021-2024)\",\n    subtitle = \"Shows seasonal patterns and the dramatic 2021-2022 decline\",\n    x = \"Month\",\n    y = \"Teen Victims per Month\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.x = element_text(angle = 45, hjust = 1)\n  ) +\n  scale_x_date(date_labels = \"%Y-%m\", date_breaks = \"6 months\") +\n  geom_smooth(method = \"loess\", se = TRUE, alpha = 0.3, color = \"red\")\n\nprint(monthly_trend_plot)\n\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\n\n\n\n\nShow the code\n# Compare Quebec teen trends to national teen trends\nnational_teens$date_clean &lt;- as.Date(national_teens$date)\nnational_teens$year &lt;- as.numeric(format(national_teens$date_clean, \"%Y\"))\n\nnational_yearly_teen &lt;- table(national_teens$year)\nnational_yearly_df &lt;- data.frame(\n  year = as.numeric(names(national_yearly_teen)),\n  national_teens = as.numeric(national_yearly_teen)\n)\n\n# Merge Quebec and national data for comparison\nteen_comparison &lt;- merge(yearly_teen_df[, c(\"year\", \"teen_victims\")], national_yearly_df, by = \"year\")\nteen_comparison$quebec_share &lt;- round((teen_comparison$teen_victims / teen_comparison$national_teens) * 100, 1)\n\ncat(\"\\nQuebec's Share of National Teen Fraud Over Time:\\n\")\n\n\n\nQuebec's Share of National Teen Fraud Over Time:\n\n\nShow the code\nprint(teen_comparison)\n\n\n  year teen_victims national_teens quebec_share\n1 2021         3415           4693         72.8\n2 2022          943           1945         48.5\n3 2023          988           1697         58.2\n4 2024          744           1174         63.4\n5 2025          674            974         69.2"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#compare-quebecs-2021-teen-fraud-spike-to-other-major-provinces-report",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#compare-quebecs-2021-teen-fraud-spike-to-other-major-provinces-report",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Compare Quebec’s 2021 teen fraud spike to other major provinces Report",
    "text": "Compare Quebec’s 2021 teen fraud spike to other major provinces Report\n\n\nShow the code\n# Compare Quebec's 2021 teen fraud spike to other major provinces\n# Get teen data for major provinces\nmajor_provinces &lt;- c(\"Ontario\", \"Quebec\", \"British Columbia\", \"Alberta\", \"Manitoba\")\n\n# Create provincial teen analysis for 2021\nprovincial_teen_2021 &lt;- cafc_clean[cafc_clean$age_range == \"'10 - 19\" & \n                                  as.numeric(format(as.Date(cafc_clean$date), \"%Y\")) == 2021 &\n                                  cafc_clean$province %in% major_provinces, ]\n\nteen_by_province_2021 &lt;- table(provincial_teen_2021$province)\nteen_province_2021_df &lt;- data.frame(\n  province = names(teen_by_province_2021),\n  teen_victims_2021 = as.numeric(teen_by_province_2021)\n)\n\n# Get population data for per-capita calculation\nprovince_pop_subset &lt;- provincial_population[provincial_population$province %in% major_provinces, ]\nteen_analysis_2021 &lt;- merge(teen_province_2021_df, province_pop_subset, by = \"province\")\nteen_analysis_2021$teen_rate_per_100k_2021 &lt;- (teen_analysis_2021$teen_victims_2021 / \n                                              (teen_analysis_2021$population * 1000)) * 100000\n\ncat(\"2021 Teen Fraud by Province:\\n\")\n\n\n2021 Teen Fraud by Province:\n\n\nShow the code\nteen_analysis_2021[order(teen_analysis_2021$teen_rate_per_100k_2021, decreasing = TRUE), ]\n\n\n          province teen_victims_2021 population teen_rate_per_100k_2021\n5           Quebec              3415       8751               39.024112\n3         Manitoba                72       1431                5.031447\n4          Ontario               743      15608                4.760379\n2 British Columbia               192       5519                3.478891\n1          Alberta               161       4756                3.385198"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#teen-fraud-rates-by-province",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#teen-fraud-rates-by-province",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "2021 Teen Fraud Rates by Province",
    "text": "2021 Teen Fraud Rates by Province\n\n\nShow the code\n# Create visualization comparing 2021 teen fraud rates\nprovincial_teen_2021_plot &lt;- ggplot(teen_analysis_2021, \n                                   aes(x = reorder(province, teen_rate_per_100k_2021), \n                                       y = teen_rate_per_100k_2021)) +\n  geom_col(aes(fill = ifelse(province == \"Quebec\", \"Quebec\", \"Other Provinces\")), \n           alpha = 0.8) +\n  coord_flip(clip=\"off\") +\n  scale_fill_manual(values = c(\"Quebec\" = \"red\", \"Other Provinces\" = \"steelblue\"),\n                   name = \"Province Type\") +\n  labs(\n    title = \"2021 Teen Fraud Rates by Province\",\n    subtitle = \"Quebec's rate was 8x higher than the next highest province\",\n    x = \"Province\",\n    y = \"Teen Fraud Rate per 100,000 Population (2021)\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.y = element_text(size = 10)\n  ) +\n  geom_text(aes(label = paste0(round(teen_rate_per_100k_2021, 1), \"\\n(\", \n                              teen_victims_2021, \" victims)\")), \n            hjust = -0.1, size = 3.5)\n\nprint(provincial_teen_2021_plot)\n\n\n\n\n\n\n\n\n\nShow the code\n# Compare Quebec to national average in 2021\nnational_teen_2021 &lt;- sum(teen_by_province_2021)\ntotal_pop_major_provinces &lt;- sum(teen_analysis_2021$population * 1000)\nnational_teen_rate_2021 &lt;- (national_teen_2021 / total_pop_major_provinces) * 100000\n\ncat(\"\\n2021 Comparison Summary:\\n\")\n\n\n\n2021 Comparison Summary:\n\n\nShow the code\ncat(\"Quebec teen fraud rate: 39.0 per 100,000\\n\")\n\n\nQuebec teen fraud rate: 39.0 per 100,000\n\n\nShow the code\ncat(\"National average (major provinces): \", round(national_teen_rate_2021, 1), \" per 100,000\\n\")\n\n\nNational average (major provinces):  12.7  per 100,000\n\n\nShow the code\ncat(\"Quebec's rate is\", round(39.0 / national_teen_rate_2021, 1), \"x higher than national average\\n\")\n\n\nQuebec's rate is 3.1 x higher than national average\n\n\n##Teen Fraud Rates Over Time by Province\n\n\nShow the code\n# Analyze multi-year trends for all major provinces to see if 2021 was unique to Quebec\n# Get teen data by province and year for trend analysis\nteen_trends_all &lt;- data.frame()\n\nfor(prov in major_provinces) {\n  prov_teens &lt;- cafc_clean[cafc_clean$age_range == \"'10 - 19\" & cafc_clean$province == prov, ]\n  prov_teens$year &lt;- as.numeric(format(as.Date(prov_teens$date), \"%Y\"))\n  \n  yearly_counts &lt;- table(prov_teens$year)\n  prov_yearly_df &lt;- data.frame(\n    province = prov,\n    year = as.numeric(names(yearly_counts)),\n    teen_victims = as.numeric(yearly_counts)\n  )\n  \n  # Add population for rate calculation\n  pop &lt;- provincial_population[provincial_population$province == prov, \"population\"] * 1000\n  prov_yearly_df$rate_per_100k &lt;- (prov_yearly_df$teen_victims / pop) * 100000\n  \n  teen_trends_all &lt;- rbind(teen_trends_all, prov_yearly_df)\n}\n\n# Create multi-province trend comparison\ntrend_comparison_plot &lt;- ggplot(teen_trends_all, aes(x = year, y = rate_per_100k, color = province)) +\n  geom_line(size = 1.2) +\n  geom_point(size = 3) +\n  scale_color_manual(values = c(\"Quebec\" = \"red\", \"Ontario\" = \"blue\", \n                               \"British Columbia\" = \"green\", \"Alberta\" = \"orange\", \n                               \"Manitoba\" = \"purple\")) +\n  labs(\n    title = \"Teen Fraud Rates Over Time by Province\",\n    subtitle = \"Quebec's 2021 spike was unique - other provinces remained stable\",\n    x = \"Year\",\n    y = \"Teen Fraud Rate per 100,000\",\n    color = \"Province\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    legend.position = \"right\"\n  ) +\n  scale_x_continuous(breaks = 2021:2025)\n\nprint(trend_comparison_plot)\n\n\n\n\n\n\n\n\n\nShow the code\n# Show the data table for clear comparison\ncat(\"\\nTeen Fraud Rates by Province and Year:\\n\")\n\n\n\nTeen Fraud Rates by Province and Year:\n\n\nShow the code\nteen_trends_wide &lt;- reshape(teen_trends_all[, c(\"province\", \"year\", \"rate_per_100k\")], \n                           idvar = \"province\", timevar = \"year\", direction = \"wide\")\nprint(teen_trends_wide)\n\n\n           province rate_per_100k.2021 rate_per_100k.2022 rate_per_100k.2023\n1           Ontario           4.760379           3.421322           2.569195\n6            Quebec          39.024112          10.775911          11.290138\n11 British Columbia           3.478891           3.025910           1.793803\n16          Alberta           3.385198           2.439024           1.871320\n21         Manitoba           5.031447           4.402516           2.795248\n   rate_per_100k.2024 rate_per_100k.2025\n1            1.486417          1.0507432\n6            8.501885          7.7019769\n11           1.286465          0.7247690\n16           1.051304          0.9041211\n21           2.096436          1.0482180"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#analyze-the-pattern-of-decline",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#analyze-the-pattern-of-decline",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Analyze the pattern of decline",
    "text": "Analyze the pattern of decline\n\n\nShow the code\n# Analyze the pattern of decline to understand what interventions might have worked\n# Look at which fraud types declined most dramatically after 2021\n\n# Analyze Quebec teen fraud types by year to see which declined most\nquebec_teens_fraud_by_year &lt;- table(quebec_teens$year, quebec_teens$fraud_cat)\n\n# Convert to data frame and calculate year-over-year changes\nfraud_by_year_df &lt;- as.data.frame(quebec_teens_fraud_by_year)\nnames(fraud_by_year_df) &lt;- c(\"year\", \"fraud_type\", \"count\")\n\n# Focus on major fraud types and years 2021-2024\nmajor_teen_frauds &lt;- c(\"Identity Fraud\", \"Personal Info\", \"Extortion\", \"Phishing\", \"Bank Investigator\")\nfraud_trends &lt;- fraud_by_year_df[fraud_by_year_df$fraud_type %in% major_teen_frauds & \n                                fraud_by_year_df$year %in% c(\"2021\", \"2022\", \"2023\", \"2024\"), ]\n\n# Calculate decline rates for each fraud type\nfraud_decline_analysis &lt;- data.frame()\nfor(fraud_type in major_teen_frauds) {\n  type_data &lt;- fraud_trends[fraud_trends$fraud_type == fraud_type, ]\n  if(nrow(type_data) &gt;= 2) {\n    decline_2021_to_2022 &lt;- ((type_data[type_data$year == \"2022\", \"count\"] - \n                             type_data[type_data$year == \"2021\", \"count\"]) / \n                            type_data[type_data$year == \"2021\", \"count\"]) * 100\n    \n    fraud_decline_analysis &lt;- rbind(fraud_decline_analysis, data.frame(\n      fraud_type = fraud_type,\n      count_2021 = type_data[type_data$year == \"2021\", \"count\"],\n      count_2022 = type_data[type_data$year == \"2022\", \"count\"],\n      decline_2021_to_2022 = round(decline_2021_to_2022, 1)\n    ))\n  }\n}\n\ncat(\"Quebec Teen Fraud Decline by Type (2021 to 2022):\\n\")\n\n\nQuebec Teen Fraud Decline by Type (2021 to 2022):\n\n\nShow the code\nfraud_decline_analysis[order(fraud_decline_analysis$decline_2021_to_2022), ]\n\n\n         fraud_type count_2021 count_2022 decline_2021_to_2022\n1    Identity Fraud       2823        598                -78.8\n3         Extortion         55         20                -63.6\n2     Personal Info        381        199                -47.8\n5 Bank Investigator          3          3                  0.0\n4          Phishing          9         32                255.6"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#analyze-which-solicitation-methods-declined-most-dramatically",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#analyze-which-solicitation-methods-declined-most-dramatically",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Analyze which solicitation methods declined most dramatically",
    "text": "Analyze which solicitation methods declined most dramatically\n\n\nShow the code\n# Analyze which solicitation methods declined most dramatically\nquebec_teens_methods_by_year &lt;- table(quebec_teens$year, quebec_teens$sol_method)\n\n# Focus on known methods (exclude \"Other/unknown\" and \"Not Available\")\nknown_methods &lt;- c(\"Internet-social network\", \"Direct call\", \"Internet\", \"Text message\", \"Email\")\nmethods_by_year_df &lt;- as.data.frame(quebec_teens_methods_by_year)\nnames(methods_by_year_df) &lt;- c(\"year\", \"method\", \"count\")\n\nmethods_trends &lt;- methods_by_year_df[methods_by_year_df$method %in% known_methods & \n                                   methods_by_year_df$year %in% c(\"2021\", \"2022\", \"2023\", \"2024\"), ]\n\n# Calculate method decline rates\nmethod_decline_analysis &lt;- data.frame()\nfor(method in known_methods) {\n  method_data &lt;- methods_trends[methods_trends$method == method, ]\n  if(nrow(method_data) &gt;= 2 && any(method_data$year == \"2021\") && any(method_data$year == \"2022\")) {\n    count_2021 &lt;- method_data[method_data$year == \"2021\", \"count\"]\n    count_2022 &lt;- method_data[method_data$year == \"2022\", \"count\"]\n    \n    if(length(count_2021) &gt; 0 && length(count_2022) &gt; 0 && count_2021 &gt; 0) {\n      decline_rate &lt;- ((count_2022 - count_2021) / count_2021) * 100\n      \n      method_decline_analysis &lt;- rbind(method_decline_analysis, data.frame(\n        method = method,\n        count_2021 = count_2021,\n        count_2022 = count_2022,\n        decline_rate = round(decline_rate, 1)\n      ))\n    }\n  }\n}\n\ncat(\"\\nQuebec Teen Fraud Method Decline (2021 to 2022):\\n\")\n\n\n\nQuebec Teen Fraud Method Decline (2021 to 2022):\n\n\nShow the code\nif(nrow(method_decline_analysis) &gt; 0) {\n  method_decline_analysis[order(method_decline_analysis$decline_rate), ]\n} else {\n  cat(\"Limited data for method-specific analysis\\n\")\n}\n\n\n                   method count_2021 count_2022 decline_rate\n2             Direct call         71         24        -66.2\n3                Internet         65         27        -58.5\n5                   Email         21         16        -23.8\n1 Internet-social network         31         43         38.7\n4            Text message         18         32         77.8\n\n\nShow the code\n# Analyze the \"Other/unknown\" category which was 88.4% of teen fraud\nother_unknown_by_year &lt;- quebec_teens_methods_by_year[, \"Other/unknown\"]\ncat(\"\\n'Other/unknown' method trends:\\n\")\n\n\n\n'Other/unknown' method trends:\n\n\nShow the code\ncat(\"2021:\", other_unknown_by_year[\"2021\"], \"cases\\n\")\n\n\n2021: 3171 cases\n\n\nShow the code\ncat(\"2022:\", other_unknown_by_year[\"2022\"], \"cases\\n\")\n\n\n2022: 749 cases\n\n\nShow the code\ncat(\"Decline:\", round(((other_unknown_by_year[\"2022\"] - other_unknown_by_year[\"2021\"]) / \n                     other_unknown_by_year[\"2021\"]) * 100, 1), \"%\\n\")\n\n\nDecline: -76.4 %"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#summary-of-the-most-significant-declines",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#summary-of-the-most-significant-declines",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "summary of the most significant declines",
    "text": "summary of the most significant declines\n\n\nShow the code\n# Create comprehensive visualization of what declined most dramatically\n# Create a summary of the most significant declines\n\n# Create intervention clues analysis\nintervention_clues &lt;- data.frame(\n  category = c(\"Identity Fraud\", \"Personal Info\", \"Extortion\", \"Other/Unknown Methods\", \n               \"Direct Calls\", \"Internet Fraud\", \"Total Teen Victims\"),\n  decline_2021_to_2022 = c(-78.8, -47.8, -63.6, -76.4, -66.2, -58.5, -72.4),\n  interpretation = c(\n    \"Massive drop suggests identity protection education/awareness\",\n    \"Moderate drop - personal info awareness campaigns\", \n    \"Large drop - anti-extortion education or law enforcement\",\n    \"Huge drop - suggests platform changes or novel method disruption\",\n    \"Large drop - phone fraud awareness or call blocking\",\n    \"Large drop - internet safety education or platform security\",\n    \"Overall dramatic success across all vectors\"\n  )\n)"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#quebec-teen-fraud-decline-patterns-2021-to-2022",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#quebec-teen-fraud-decline-patterns-2021-to-2022",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Quebec Teen Fraud Decline Patterns (2021 to 2022)",
    "text": "Quebec Teen Fraud Decline Patterns (2021 to 2022)\n\n\nShow the code\n# Visualize the decline \n\nlibrary(ggplot2)\ndecline_plot &lt;- ggplot(intervention_clues[1:6, ], aes(x = reorder(category, decline_2021_to_2022), \n                                                     y = decline_2021_to_2022)) +\n  geom_col(aes(fill = ifelse(decline_2021_to_2022 &lt; -70, \"Major Decline (&gt;70%)\", \n                            ifelse(decline_2021_to_2022 &lt; -50, \"Large Decline (50-70%)\", \n                                  \"Moderate Decline (&lt;50%)\"))), alpha = 0.8) +\n  coord_flip(clip=\"off\") +\n  scale_fill_manual(values = c(\"Major Decline (&gt;70%)\" = \"darkred\", \n                              \"Large Decline (50-70%)\" = \"orange\",\n                              \"Moderate Decline (&lt;50%)\" = \"yellow\"),\n                   name = \"Decline Severity\") +\n  labs(\n    title = \"Quebec Teen Fraud Decline Patterns (2021 to 2022)\",\n    subtitle = \"Identifies which interventions were most effective\",\n    x = \"Fraud Category/Method\",\n    y = \"Percentage Decline\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    axis.text.y = element_text(size = 10)\n  ) +\n  geom_text(aes(label = paste0(decline_2021_to_2022, \"%\")), \n            hjust = ifelse(intervention_clues[1:6, ]$decline_2021_to_2022 &lt; 0, 1.1, -0.1), size = 2.0)\n\nprint(decline_plot)\n\n\n\n\n\n\n\n\n\nShow the code\ncat(\"\\nInferred Intervention Types Based on Decline Patterns:\\n\")\n\n\n\nInferred Intervention Types Based on Decline Patterns:\n\n\nShow the code\nprint(intervention_clues[, c(\"category\", \"decline_2021_to_2022\", \"interpretation\")])\n\n\n               category decline_2021_to_2022\n1        Identity Fraud                -78.8\n2         Personal Info                -47.8\n3             Extortion                -63.6\n4 Other/Unknown Methods                -76.4\n5          Direct Calls                -66.2\n6        Internet Fraud                -58.5\n7    Total Teen Victims                -72.4\n                                                    interpretation\n1    Massive drop suggests identity protection education/awareness\n2                Moderate drop - personal info awareness campaigns\n3         Large drop - anti-extortion education or law enforcement\n4 Huge drop - suggests platform changes or novel method disruption\n5              Large drop - phone fraud awareness or call blocking\n6      Large drop - internet safety education or platform security\n7                      Overall dramatic success across all vectors"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#modified-victims-by-gender",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#modified-victims-by-gender",
    "title": "Per Capita: Quebec Teens most Targeted by Fraud",
    "section": "Modified Victims by Gender",
    "text": "Modified Victims by Gender\n\n\nShow the code\ngender_plot &lt;- ggplot(gender_df, aes(x = gender, y = count, fill = gender)) +\n  geom_bar(stat = \"identity\") +\n  labs(\n    title = \"Fraud Victims by Gender\",\n    subtitle = \"Distribution of reported fraud cases\",\n    fill = \"Gender\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    legend.position = \"none\"\n  ) +\n  scale_fill_manual(values = c(\"Female\" = \"pink\", \"Male\" = \"lightblue\", \"Other\" = \"lightgray\")) +\n  geom_text(aes(label = scales::comma(count)), vjust = -0.4, size = 3.5)\n\nprint(gender_plot)"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#gender-distribution",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#gender-distribution",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Gender Distribution",
    "text": "Gender Distribution\n\n\nShow the code\ngender_plot &lt;- ggplot(gender_df, aes(x = gender, y = count, fill = gender)) +\n  geom_bar(stat = \"identity\") +\n  labs(\n    title = \"Fraud Victims by Gender\",\n    subtitle = \"Distribution of reported fraud cases\",\n    fill = \"Gender\"\n  ) +\n  theme_minimal() +\n  theme(\n    plot.title = element_text(size = 14, face = \"bold\"),\n    legend.position = \"none\"\n  ) +\n  scale_fill_manual(values = c(\"Female\" = \"pink\", \"Male\" = \"lightblue\", \"Other\" = \"lightgray\")) +\n  geom_text(aes(label = scales::comma(count)), vjust = -0.4, size = 3.5)\n\nprint(gender_plot)"
  },
  {
    "objectID": "posts/CAFC_2025Q3_Analysis/index.html#fraud-province-table",
    "href": "posts/CAFC_2025Q3_Analysis/index.html#fraud-province-table",
    "title": "Per capita: Quebec teens most targeted by fraud in Canada",
    "section": "Fraud Province Table",
    "text": "Fraud Province Table\n\n\nShow the code\n# Create a cross-tabulation of fraud types by province\nfraud_province_table &lt;- table(cafc_clean$province, cafc_clean$fraud_cat)\n\n# Convert to data frame for ggplot\nfraud_province_df &lt;- as.data.frame(fraud_province_table)\nnames(fraud_province_df) &lt;- c(\"Province\", \"Fraud_Type\", \"Count\")\n\n# Filter to focus on major provinces and fraud types (to make heatmap readable)\n# Get top 8 provinces by total fraud cases\ntop_provinces &lt;- names(sort(rowSums(fraud_province_table), decreasing = TRUE))[1:8]\n\n# Get top 10 fraud types by total cases\ntop_fraud_types &lt;- names(sort(colSums(fraud_province_table), decreasing = TRUE))[1:10]\n\n# Filter the data\nfraud_province_filtered &lt;- fraud_province_df[\n  fraud_province_df$Province %in% top_provinces & \n  fraud_province_df$Fraud_Type %in% top_fraud_types, ]\n\n# Check the structure\ncat(\"Filtered data dimensions:\", nrow(fraud_province_filtered), \"rows\\n\")\n\n\nFiltered data dimensions: 80 rows\n\n\nShow the code\ncat(\"Top provinces:\", paste(top_provinces, collapse = \", \"), \"\\n\")\n\n\nTop provinces: Ontario, Quebec, British Columbia, Alberta, Manitoba, Saskatchewan, Nova Scotia, New Brunswick \n\n\nShow the code\ncat(\"Top fraud types:\", paste(top_fraud_types[1:5], collapse = \", \"), \"...\\n\")\n\n\nTop fraud types: Identity Fraud, Personal Info, Extortion, Service, Phishing ..."
  }
]